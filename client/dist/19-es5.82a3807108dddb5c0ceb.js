!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{DPKD:function(e,n,i){"use strict";i.r(n),i.d(n,"ArchivedOrdersModule",function(){return I});var o=i("tyNb"),a=i("mrSG"),c=i("vkgz"),s=i("3Pt+"),l=i("GGDx"),u=i("mXS1"),d=i("r4zg"),p=i("fXoL"),b=i("ofXK"),f=i("bTqV");function h(t,e){if(1&t){var r=p.Sb();p.Rb(0,"button",1),p.Yb("click",function(){return p.oc(r),p.cc().onClick(1)}),p.xc(1,"UnArchive "),p.Qb()}}var m,g=((m=function(){function e(){t(this,e)}return r(e,[{key:"agInit",value:function(t){this.params=t,this.isFileSet=null!=this.params.data.exportFile,this.value=+this.params.value}},{key:"onClick",value:function(t){this.value=t,this.params.node.setDataValue(this.params.colDef,this.value)}},{key:"refresh",value:function(t){return!0}}]),e}()).\u0275fac=function(t){return new(t||m)},m.\u0275cmp=p.Fb({type:m,selectors:[["ct-archive-button"]],decls:1,vars:1,consts:[["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","accent",3,"click"]],template:function(t,e){1&t&&p.wc(0,h,2,0,"button",0),2&t&&p.hc("ngIf",!e.isFileSet)},directives:[b.k,f.a],styles:["button[_ngcontent-%COMP%] {\n          font-size: 12px !important;\n          height: 24px !important;\n          padding: 2px !important;\n          line-height: 12px !important;\n        }"]}),m),v=i("MOE4"),k=i("0IaG"),w=i("u47x"),R=i("A9p3"),S=i("3LUQ"),y=i("Wp6s"),D=i("kmnG"),M=i("qFsG"),C=i("iadO"),O=i("STbY"),x=i("NFeN"),F=i("Qu3c"),A=i("cWTo");function Q(t,e){if(1&t&&(p.Rb(0,"div",13),p.Mb(1,"ag-grid-angular",14),p.Qb()),2&t){var r=p.cc();p.Ab(1),p.hc("gridOptions",r.options)("modules",r.modules)("rowData",r.rowData)}}var P,_,G=((P=function(){function e(r,n,i,o,a){var c=this;t(this,e),this.ordersService=r,this.dialog=n,this._focusMonitor=i,this.confirmService=o,this.alertService=a,this.orderDateForm=new s.f({orderDate:new s.d(d.a.now())}),this.orderStatus=0,this.rowData=[],this.modules=[],this.modules=[u.a],this.loadHeaders().subscribe(function(t){c.setupOptions()},function(t){console.log(t),c.onError("Could not load grid info")})}return r(e,[{key:"onGridReady",value:function(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.addFilter({lastModification:{filter:d.a.toMysqlDate(this.orderDateForm.value.orderDate)}}),this.addFilter({orderStatus:{filter:d.a.orderStatus.ORDER_ARCHIVED}}),this.gridApi.setServerSideDatasource(this.ordersService),this.listenToOrderDateForm()}},{key:"addFilter",value:function(t){if(this.gridApi){var e=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(e,t))}}},{key:"listenToOrderDateForm",value:function(){var t=this;this.orderDateForm.valueChanges.subscribe(function(e){t.addFilter({lastModification:{filter:d.a.toMysqlDate(e.orderDate)}})})}},{key:"loadHeaders",value:function(){var t=this;return this.ordersService.getHeader().pipe(Object(c.a)(function(e){t.columns=e,t.columns[0].hide=!1,t.columns[0].editable=!0,t.columns[0].valueSetter=t.setValue.bind(t),t.columns[0].cellRenderer="archiveButtonRenderer"}))}},{key:"setupOptions",value:function(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,tooltipComponent:"tooltipRenderer",filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!1},animateRows:!0,rowModelType:"serverSide",rowSelection:"single",cacheBlockSize:10,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{tooltipRenderer:l.a,archiveButtonRenderer:g}}}},{key:"refresh",value:function(){this.gridApi.purgeServerSideCache()}},{key:"setValue",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t.data.id,name:t.colDef.field,value:t.newValue},console.log(r),t.data[t.colDef.field]=t.newValue,e.next=4,this.ordersService.updateCell(r);case 4:return n=e.sent,e.abrupt("return",((n.status?this.onSuccess.bind(this):this.onError.bind(this))(n.message),this.refresh(),n.status));case 6:case"end":return e.stop()}},e,this)}))}},{key:"noRowSelected",value:function(){var t=this.gridApi?this.gridApi.getSelectedNodes():null;return!t||0===t.length}},{key:"onSuccess",value:function(t){this.alertService.alertSuccess(t)}},{key:"onError",value:function(t){this.alertService.alertError(t)}},{key:"clearFilters",value:function(){this.orderDateForm.reset({orderDate:null}),this.gridApi.setFilterModel({orderStatus:{filter:d.a.orderStatus.ORDER_ARCHIVED}}),this.refresh()}}]),e}()).\u0275fac=function(t){return new(t||P)(p.Lb(v.a),p.Lb(k.b),p.Lb(w.h),p.Lb(R.a),p.Lb(S.a))},P.\u0275cmp=p.Fb({type:P,selectors:[["ct-archived-orders"]],decls:31,vars:6,consts:[[1,"ct-toolbar","mat-elevation-z1"],[1,"ct-spacer"],[3,"formGroup"],[1,"ct-order-date"],["matInput","","formControlName","orderDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-icon-button","",1,"ct-filter",3,"color","matMenuTriggerFor"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","","matTooltip","Reset Filters","color","accent",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(t,e){if(1&t&&(p.Rb(0,"mat-card",0),p.Mb(1,"span",1),p.Rb(2,"div",2),p.Rb(3,"mat-form-field",3),p.Rb(4,"mat-label"),p.xc(5,"Choose a date"),p.Qb(),p.Mb(6,"input",4),p.Mb(7,"mat-datepicker-toggle",5),p.Mb(8,"mat-datepicker",null,6),p.Qb(),p.Qb(),p.Rb(10,"button",7),p.Rb(11,"mat-icon"),p.xc(12,"filter_alt"),p.Qb(),p.Qb(),p.Rb(13,"button",8),p.Yb("click",function(){return e.refresh()}),p.Rb(14,"mat-icon"),p.xc(15,"refresh"),p.Qb(),p.Qb(),p.Rb(16,"mat-menu",null,9),p.Rb(18,"button",10),p.Yb("click",function(){return e.orderStatus=0,e.refresh()}),p.Rb(19,"span"),p.xc(20,"Both"),p.Qb(),p.Qb(),p.Rb(21,"button",10),p.Yb("click",function(){return e.orderStatus=1,e.refresh()}),p.Rb(22,"span"),p.xc(23,"Pending"),p.Qb(),p.Qb(),p.Rb(24,"button",10),p.Yb("click",function(){return e.orderStatus=2,e.refresh()}),p.Rb(25,"span"),p.xc(26,"Queued"),p.Qb(),p.Qb(),p.Qb(),p.Rb(27,"button",11),p.Yb("click",function(){return e.clearFilters()}),p.Rb(28,"mat-icon"),p.xc(29,"cancel"),p.Qb(),p.Qb(),p.Qb(),p.wc(30,Q,2,3,"div",12)),2&t){var r=p.mc(9),n=p.mc(17);p.Ab(2),p.hc("formGroup",e.orderDateForm),p.Ab(4),p.hc("matDatepicker",r),p.Ab(1),p.hc("for",r),p.Ab(3),p.hc("color",0!=e.orderStatus?"primary":"")("matMenuTriggerFor",n),p.Ab(20),p.hc("ngIf",e.columns)}},directives:[y.a,s.m,s.g,D.c,D.f,M.b,s.c,C.d,s.l,s.e,C.f,D.h,C.c,f.a,O.d,x.a,F.a,O.a,O.b,b.k,A.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),P),T=i("PCNd"),E=i("vvyD"),I=((_=function e(){t(this,e)}).\u0275mod=p.Jb({type:_}),_.\u0275inj=p.Ib({factory:function(t){return new(t||_)},imports:[[b.c,T.a,A.b.withComponents(),E.a,s.h,s.q,o.e.forChild([{path:"",component:G,pathMatch:"full"}])]]}),_)}}])}();