(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{E6va:function(e,t,o){"use strict";o.r(t),o.d(t,"UsersModule",function(){return E});var r=o("tyNb"),a=o("mrSG"),n=o("sU9S"),i=o("0IaG"),s=o("fXoL"),c=o("MOE4"),l=o("3Pt+"),d=o("kmnG"),u=o("qFsG"),h=o("ofXK"),b=o("NFeN"),m=o("bSwM"),p=o("bTqV");function g(e,t){1&e&&(s.Rb(0,"mat-error"),s.Rb(1,"strong"),s.xc(2,"username is required"),s.Qb(),s.Qb())}function f(e,t){1&e&&(s.Rb(0,"mat-error"),s.Rb(1,"strong"),s.xc(2,"password is required"),s.Qb(),s.Qb())}let w=(()=>{class e{constructor(e,t,o){this.dialogRef=e,this.data=t,this.ordersService=o,this.showPassword=!1}cancel(){this.dialogRef.close(!1)}save(e){e.invalid||this.dialogRef.close(this.data)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(i.g),s.Lb(i.a),s.Lb(c.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-users-form"]],decls:34,vars:14,consts:[["novalidate",""],["orderForm","ngForm"],["mat-dialog-title",""],["floatLabel","always"],["matInput","","name","name","type","text",3,"ngModel","ngModelChange"],["matInput","","type","text","name","username",3,"required","ngModel","ngModelChange"],["username","ngModel"],[4,"ngIf"],["matInput","","autocomplete","","name","password",3,"required","ngModel","type","ngModelChange"],["password","ngModel"],["matSuffix","",1,"indicator",3,"color","click"],[1,"mat-form-field"],["name","active",3,"checked","ngModel","ngModelChange"],["name","admin",3,"checked","ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(e,t){if(1&e){const e=s.Sb();s.Rb(0,"form",0,1),s.Rb(2,"h1",2),s.xc(3,"Add New"),s.Qb(),s.Rb(4,"mat-dialog-content"),s.Rb(5,"mat-form-field",3),s.Rb(6,"mat-label"),s.xc(7,"Name"),s.Qb(),s.Rb(8,"input",4),s.Yb("ngModelChange",function(e){return t.data.name=e}),s.Qb(),s.Qb(),s.Rb(9,"mat-form-field"),s.Rb(10,"mat-label"),s.xc(11,"Username"),s.Qb(),s.Rb(12,"input",5,6),s.Yb("ngModelChange",function(e){return t.data.username=e}),s.Qb(),s.wc(14,g,3,0,"mat-error",7),s.Qb(),s.Rb(15,"mat-form-field"),s.Rb(16,"mat-label"),s.xc(17," Password "),s.Qb(),s.Rb(18,"input",8,9),s.Yb("ngModelChange",function(e){return t.data.password=e}),s.Qb(),s.Rb(20,"mat-icon",10),s.Yb("click",function(){return t.showPassword=!t.showPassword}),s.xc(21),s.Qb(),s.wc(22,f,3,0,"mat-error",7),s.Qb(),s.Rb(23,"div",11),s.Rb(24,"mat-checkbox",12),s.Yb("ngModelChange",function(e){return t.data.active=e}),s.xc(25," ACTIVE "),s.Qb(),s.Qb(),s.Rb(26,"div",11),s.Rb(27,"mat-checkbox",13),s.Yb("ngModelChange",function(e){return t.data.admin=e}),s.xc(28," ADMIN "),s.Qb(),s.Qb(),s.Qb(),s.Rb(29,"mat-dialog-actions"),s.Rb(30,"button",14),s.Yb("click",function(){return t.cancel()}),s.xc(31,"Cancel"),s.Qb(),s.Rb(32,"button",15),s.Yb("click",function(){s.oc(e);const o=s.mc(1);return t.save(o)}),s.xc(33,"Save"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.mc(13),o=s.mc(19);s.Ab(8),s.hc("ngModel",t.data.name),s.Ab(4),s.hc("required",!0)("ngModel",t.data.username),s.Ab(2),s.hc("ngIf",e.hasError("required")),s.Ab(4),s.hc("required",!0)("ngModel",t.data.password)("type",t.showPassword?"text":"password"),s.Ab(2),s.hc("color",t.showPassword?"accent":"auto"),s.Ab(1),s.zc(" ",t.showPassword?"visibility":"visibility_off"," "),s.Ab(1),s.hc("ngIf",o.hasError("required")),s.Ab(2),s.hc("checked",!0)("ngModel",t.data.active),s.Ab(3),s.hc("checked",!0)("ngModel",t.data.admin)}},directives:[l.t,l.m,l.n,i.h,i.e,d.c,d.f,u.b,l.c,l.l,l.o,l.r,h.k,b.a,d.h,m.a,i.c,p.a,d.b],styles:[".mat-form-field[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),e})();var v=o("tXqc"),R=o("6Qg2"),M=o("A9p3"),S=o("3LUQ"),k=o("Wp6s"),A=o("Qu3c"),C=o("cWTo");function y(e,t){if(1&e&&(s.Rb(0,"div",6),s.Mb(1,"ag-grid-angular",7),s.Qb()),2&e){const e=s.cc();s.Ab(1),s.hc("gridOptions",e.options)("modules",e.modules)("rowData",e.rowData)}}let x=(()=>{class e{constructor(e,t,o,r){this.usersService=e,this.dialog=t,this.confirmService=o,this.alertService=r,this.rowData=[],this.modules=[],this.defineHeader(),this.setupOptions()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}refresh(){this.usersService.getUsers().subscribe(e=>{e.status&&this.gridApi.setRowData(e.data)})}defineHeader(){this.columns=[{field:"name",headerName:"Name",editable:!0},{field:"username",headerName:"Username",editable:!0},{field:"active",headerName:"Active",cellRenderer:"checkboxRenderer"},{field:"admin",headerName:"Admin",cellRenderer:"checkboxRenderer"}]}setupOptions(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:n.a,checkboxRenderer:v.a}}}setValue(e){return Object(a.a)(this,void 0,void 0,function*(){const t={id:e.data.id,name:e.colDef.field,value:e.newValue};e.data[e.colDef.field]=e.newValue;const o=yield this.usersService.updateCell(t);return(o.status?this.onSuccess.bind(this):this.onError.bind(this))(o.message),o.status})}noRowSelected(){const e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}onRemove(){const e=this.gridApi.getSelectedNodes();if(!e||0===e.length)return;const t=e[0];this.confirmService.requestDeleteConfirmation().subscribe(e=>{e&&this.removeRow(t)})}removeRow(e){this.usersService.deleteRow(+e.data.id).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.refresh(),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})}onAdd(){this.openDialog({})}onDuplicate(){const e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}openDialog(e){this.dialog.open(w,{data:e,disableClose:!0}).afterClosed().subscribe(e=>{e&&this.usersService.addRow(e).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.refresh(),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})})}onSuccess(e){this.alertService.alertSuccess(e)}onError(e){this.alertService.alertError(e),this.refresh()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(R.a),s.Lb(i.b),s.Lb(M.a),s.Lb(S.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-users-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(s.Rb(0,"mat-card",0),s.Rb(1,"button",1),s.Yb("click",function(){return t.onAdd()}),s.Rb(2,"mat-icon"),s.xc(3,"add"),s.Qb(),s.Qb(),s.Rb(4,"button",2),s.Yb("click",function(){return t.onDuplicate()}),s.Rb(5,"mat-icon"),s.xc(6,"content_copy"),s.Qb(),s.Qb(),s.Rb(7,"button",3),s.Yb("click",function(){return t.onRemove()}),s.Rb(8,"mat-icon"),s.xc(9,"delete"),s.Qb(),s.Qb(),s.Rb(10,"button",4),s.Yb("click",function(){return t.refresh()}),s.Rb(11,"mat-icon"),s.xc(12,"refresh"),s.Qb(),s.Qb(),s.Qb(),s.wc(13,y,2,3,"div",5)),2&e&&(s.Ab(4),s.hc("disabled",t.noRowSelected()),s.Ab(3),s.hc("disabled",t.noRowSelected()),s.Ab(6),s.hc("ngIf",t.columns))},directives:[k.a,p.a,A.a,b.a,h.k,C.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),e})();var Q=o("PCNd"),P=o("vvyD");let E=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[h.c,Q.a,C.b.withComponents(),P.a,l.h,l.q,r.e.forChild([{path:"",component:x,pathMatch:"full"}])]]}),e})()},PAny:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var r=o("AytR"),a=o("tk/3"),n=o("lJxs"),i=o("r4zg"),s=o("fXoL"),c=o("N+K7"),l=o("As+J");let d=(()=>{class e{constructor(e,t){this.httpService=e,this.skusService=t}getSKUs(){return this.skusService.getSkus().pipe(Object(n.a)(e=>{const t=e.data.reduce((e,t)=>{const o=e[t.skuType]||[];return o.push(t),e[t.skuType]=o,e},{});return Object.keys(t).reduce((e,o)=>(e[o]=this.addEmptyAndCompletedToSkus(t[o]),e),{})}))}getHeader(){return this.getSKUs().pipe(Object(n.a)(e=>{const t=e.HIGH_BEAM||this.addEmptyAndCompletedToSkus([]),o=e.LOW_BEAM||this.addEmptyAndCompletedToSkus([]),r=e.FOG_LIGHT||this.addEmptyAndCompletedToSkus([]);return this.buildHeader(t,o,r)}))}addEmptyAndCompletedToSkus(e){return e&&((e=e.map(e=>e.name)).unshift(i.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}buildHeader(e,t,o){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(e=>t.includes(e))}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:o}}]}getRows(e){const t=Object.keys(e.request.filterModel).map(t=>({name:t,value:e.request.filterModel[t].filter})),o=JSON.stringify(t),n=(new a.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",o).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(r.a.routes.vehicles,{params:n}).subscribe(t=>{if(t.status){e.successCallback(t.data,t.total);const o=[];e.columnApi.getAllColumns().forEach(e=>{o.push(e.colId)}),e.columnApi.autoSizeColumns(o,!1)}else e.failCallback()},t=>{e.failCallback()})}addRow(e){return this.httpService.postWithAuth(r.a.routes.vehicles,e)}updateCell(e){return this.httpService.putWithAuth(r.a.routes.vehicles,e).toPromise()}deleteRow(e){return this.httpService.deleteWithAuth(r.a.routes.vehicles+"/"+e)}getYear(){return this.httpService.get(r.a.routes.year)}getMake(e){return this.httpService.get(r.a.routes.make,{params:(new a.c).set("year",e)}).toPromise()}getModel(e,t){return this.httpService.get(r.a.routes.model,{params:(new a.c).set("year",e).set("make",t)}).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(s.Vb(c.a),s.Vb(l.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mrSG:function(e,t,o){"use strict";function r(e,t,o,r){return new(o||(o=Promise))(function(a,n){function i(e){try{c(r.next(e))}catch(t){n(t)}}function s(e){try{c(r.throw(e))}catch(t){n(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,s)}c((r=r.apply(e,t||[])).next())})}o.d(t,"a",function(){return r})}}]);