!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{PAny:function(t,r,a){"use strict";a.d(r,"a",function(){return h});var n=a("AytR"),o=a("tk/3"),s=a("lJxs"),c=a("r4zg"),l=a("fXoL"),u=a("N+K7"),d=a("As+J"),h=function(){var t=function(){function t(i,r){e(this,t),this.httpService=i,this.skusService=r}return i(t,[{key:"getSKUs",value:function(){var e=this;return this.skusService.getSkus().pipe(Object(s.a)(function(t){var i=t.data.reduce(function(e,t){var i=e[t.skuType]||[];return i.push(t),e[t.skuType]=i,e},{});return Object.keys(i).reduce(function(t,r){return t[r]=e.addEmptyAndCompletedToSkus(i[r]),t},{})}))}},{key:"getHeader",value:function(){var e=this;return this.getSKUs().pipe(Object(s.a)(function(t){var i=t.HIGH_BEAM||e.addEmptyAndCompletedToSkus([]),r=t.LOW_BEAM||e.addEmptyAndCompletedToSkus([]),a=t.FOG_LIGHT||e.addEmptyAndCompletedToSkus([]);return e.buildHeader(i,r,a)}))}},{key:"addEmptyAndCompletedToSkus",value:function(e){return e&&((e=e.map(function(e){return e.name})).unshift(c.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}},{key:"buildHeader",value:function(e,t,i){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(function(e){return t.includes(e)})}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:i}}]}},{key:"getRows",value:function(e){var t=Object.keys(e.request.filterModel).map(function(t){return{name:t,value:e.request.filterModel[t].filter}}),i=JSON.stringify(t),r=(new o.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",i).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(n.a.routes.vehicles,{params:r}).subscribe(function(t){if(t.status){e.successCallback(t.data,t.total);var i=[];e.columnApi.getAllColumns().forEach(function(e){i.push(e.colId)}),e.columnApi.autoSizeColumns(i,!1)}else e.failCallback()},function(t){e.failCallback()})}},{key:"addRow",value:function(e){return this.httpService.postWithAuth(n.a.routes.vehicles,e)}},{key:"updateCell",value:function(e){return this.httpService.putWithAuth(n.a.routes.vehicles,e).toPromise()}},{key:"deleteRow",value:function(e){return this.httpService.deleteWithAuth(n.a.routes.vehicles+"/"+e)}},{key:"getYear",value:function(){return this.httpService.get(n.a.routes.year)}},{key:"getMake",value:function(e){return this.httpService.get(n.a.routes.make,{params:(new o.c).set("year",e)}).toPromise()}},{key:"getModel",value:function(e,t){return this.httpService.get(n.a.routes.model,{params:(new o.c).set("year",e).set("make",t)}).toPromise()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Vb(u.a),l.Vb(d.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},tYUl:function(t,r,a){"use strict";a.r(r),a.d(r,"ShopifyOrdersModule",function(){return E});var n,o=a("tyNb"),s=a("LRne"),c=a("fXoL"),l=a("AytR"),u=a("N+K7"),d=((n=function(){function t(i){e(this,t),this.httpService=i}return i(t,[{key:"getShopifyProducts",value:function(){return this.httpService.getWithAuth(l.a.routes.shopifyOrders)}}]),t}()).\u0275fac=function(e){return new(e||n)(c.Vb(u.a))},n.\u0275prov=c.Hb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),h=a("MOE4"),p=a("0IaG"),f=a("A9p3"),m=a("3LUQ"),g=a("Wp6s"),b=a("bTqV"),v=a("Qu3c"),y=a("NFeN"),S=a("ofXK"),k=a("cWTo");function w(e,t){if(1&e&&(c.Rb(0,"div",4),c.Mb(1,"ag-grid-angular",5),c.Qb()),2&e){var i=c.cc();c.Ab(1),c.hc("gridOptions",i.options)("modules",i.modules)("rowData",i.rowData)}}var C,N,O=((C=function(){function t(i,r,a,n,o){e(this,t),this.syncOrdersService=i,this.ordersService=r,this.dialog=a,this.confirmService=n,this.alertService=o,this.rowData=[],this.duplications=[],this.modules=[],this.disableImport=!1,this.defineHeader(),this.setupOptions()}return i(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}},{key:"refresh",value:function(){var e=this;this.syncOrdersService.getShopifyProducts().subscribe(function(t){t.status&&(e.rowData=t.data,e.gridApi.setRowData(t.data),e.setAutoSize(),e.duplications=t.duplication)})}},{key:"defineHeader",value:function(){this.columns=[{field:"orderNo",headerName:"Order No",pinned:"left"},{field:"matchScore",headerName:"Match Score",pinned:"left"},{field:"quantity",headerName:"Quantity",type:"numericColumn"},{field:"productName",headerName:"Product name"},{field:"productTitle",headerName:"Product title"},{field:"highBeam",headerName:"High Beam"},{field:"lowBeam",headerName:"Low Beam"},{field:"fogLight",headerName:"Fog Light"},{field:"vehicleYear",headerName:"Vehicle Year"},{field:"vehicleMake",headerName:"Vehicle Make"},{field:"vehicleModel",headerName:"Vehicle Model"},{field:"vehicle",headerName:"Original"},{field:"orderNotes",headerName:"Order notes"},{field:"additionalDetails",headerName:"Additional details"},{field:"shippingName",headerName:"Shipping name"},{field:"shippingAddress1",headerName:"Shipping address1"},{field:"address2",headerName:"Address2"},{field:"shippingCity",headerName:"Shipping city"},{field:"shippingZip",headerName:"Shipping zip"},{field:"shippingProvince",headerName:"Shipping province"},{field:"shippingCountryCode",headerName:"Shipping country code"},{field:"shippingCountry",headerName:"Shipping country"},{field:"shippingPhone",headerName:"Shipping phone"},{field:"shippingCompany",headerName:"Shipping company"}]}},{key:"setupOptions",value:function(){this.options={pagination:!1,defaultColDef:{filter:!1,sortable:!1,resizable:!0},animateRows:!0,rowClassRules:{"rag-green":"data.matchScore > 97","rag-amber":"data.matchScore >= 85 && data.matchScore <= 97","rag-red":"data.matchScore < 85 && data.matchScore > 0"},rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0}}},{key:"getRowStyle",value:function(e){return 100===e.node.data.MATCH_SCORE?{background:"rgba(0,219,0,0.1)"}:{background:"rgb(255,249,102)"}}},{key:"insertOrders",value:function(){var e=this,t=this.duplications.length>0?this.askForConfirmation():Object(s.a)(!0);this.disableImport=!0,t.subscribe(function(t){t?e.ordersService.addAll(e.rowData).subscribe(function(t){t.status?e.onSuccess(t.message):(console.log(t),e.disableImport=!1,e.onError(t.message))},function(t){e.disableImport=!1,console.log(t),e.onError(t.message)}):e.disableImport=!1})}},{key:"askForConfirmation",value:function(){return this.confirmService.requestConfirmation("Import confirmation","The Following ORDER No(s) already exist, Importing them my cause duplication, would you like to import them any way ? Duplicated Order No : "+this.duplications.join(" , "))}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e),this.refresh()}},{key:"setAutoSize",value:function(){var e,t,i=[];null===(e=this.gridColumnApi.getAllColumns())||void 0===e||e.forEach(function(e){i.push(e.colId)}),null===(t=this.gridColumnApi)||void 0===t||t.autoSizeColumns(i,!1)}}]),t}()).\u0275fac=function(e){return new(e||C)(c.Lb(d),c.Lb(h.a),c.Lb(p.b),c.Lb(f.a),c.Lb(m.a))},C.\u0275cmp=c.Fb({type:C,selectors:[["ct-users-list"]],decls:8,vars:2,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","color","primary","matTooltip","Import",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(c.Rb(0,"mat-card",0),c.Rb(1,"button",1),c.Yb("click",function(){return t.insertOrders()}),c.Rb(2,"mat-icon"),c.xc(3,"publish"),c.Qb(),c.Qb(),c.Rb(4,"button",2),c.Yb("click",function(){return t.refresh()}),c.Rb(5,"mat-icon"),c.xc(6,"refresh"),c.Qb(),c.Qb(),c.Qb(),c.wc(7,w,2,3,"div",3)),2&e&&(c.Ab(1),c.hc("disabled",0===t.rowData.length||t.disableImport),c.Ab(6),c.hc("ngIf",t.columns))},directives:[g.a,b.a,v.a,y.a,S.k,k.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),C),A=a("PCNd"),M=a("vvyD"),P=a("3Pt+"),E=((N=function t(){e(this,t)}).\u0275mod=c.Jb({type:N}),N.\u0275inj=c.Ib({factory:function(e){return new(e||N)},imports:[[S.c,A.a,k.b.withComponents(),M.a,P.h,P.q,o.e.forChild([{path:"",component:O,pathMatch:"full"}])]]}),N)}}])}();