!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{PAny:function(t,r,i){"use strict";i.d(r,"a",function(){return h});var o=i("AytR"),a=i("tk/3"),s=i("lJxs"),c=i("r4zg"),u=i("fXoL"),l=i("N+K7"),d=i("As+J"),h=function(){var t=function(){function t(n,r){e(this,t),this.httpService=n,this.skusService=r}return n(t,[{key:"getSKUs",value:function(){var e=this;return this.skusService.getSkus().pipe(Object(s.a)(function(t){var n=t.data.reduce(function(e,t){var n=e[t.skuType]||[];return n.push(t),e[t.skuType]=n,e},{});return Object.keys(n).reduce(function(t,r){return t[r]=e.addEmptyAndCompletedToSkus(n[r]),t},{})}))}},{key:"getHeader",value:function(){var e=this;return this.getSKUs().pipe(Object(s.a)(function(t){var n=t.HIGH_BEAM||e.addEmptyAndCompletedToSkus([]),r=t.LOW_BEAM||e.addEmptyAndCompletedToSkus([]),i=t.FOG_LIGHT||e.addEmptyAndCompletedToSkus([]);return e.buildHeader(n,r,i)}))}},{key:"addEmptyAndCompletedToSkus",value:function(e){return e&&((e=e.map(function(e){return e.name})).unshift(c.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}},{key:"buildHeader",value:function(e,t,n){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(function(e){return t.includes(e)})}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:n}}]}},{key:"getRows",value:function(e){var t=Object.keys(e.request.filterModel).map(function(t){return{name:t,value:e.request.filterModel[t].filter}}),n=JSON.stringify(t),r=(new a.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",n).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(o.a.routes.vehicles,{params:r}).subscribe(function(t){if(t.status){e.successCallback(t.data,t.total);var n=[];e.columnApi.getAllColumns().forEach(function(e){n.push(e.colId)}),e.columnApi.autoSizeColumns(n,!1)}else e.failCallback()},function(t){e.failCallback()})}},{key:"addRow",value:function(e){return this.httpService.postWithAuth(o.a.routes.vehicles,e)}},{key:"updateCell",value:function(e){return this.httpService.putWithAuth(o.a.routes.vehicles,e).toPromise()}},{key:"deleteRow",value:function(e){return this.httpService.deleteWithAuth(o.a.routes.vehicles+"/"+e)}},{key:"getYear",value:function(){return this.httpService.get(o.a.routes.year)}},{key:"getMake",value:function(e){return this.httpService.get(o.a.routes.make,{params:(new a.c).set("year",e)}).toPromise()}},{key:"getModel",value:function(e,t){return this.httpService.get(o.a.routes.model,{params:(new a.c).set("year",e).set("make",t)}).toPromise()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Vb(l.a),u.Vb(d.a))},t.\u0275prov=u.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"kN+n":function(t,r,i){"use strict";i.r(r),i.d(r,"ShopifyProductsModule",function(){return E});var o,a=i("tyNb"),s=i("fXoL"),c=i("AytR"),u=i("N+K7"),l=((o=function(){function t(n){e(this,t),this.httpService=n}return n(t,[{key:"getShopifyProducts",value:function(){return this.httpService.getWithAuth(c.a.routes.shopifyProducts)}},{key:"import",value:function(e){return this.httpService.postWithAuth(c.a.routes.shopifyProducts,e)}}]),t}()).\u0275fac=function(e){return new(e||o)(s.Vb(u.a))},o.\u0275prov=s.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),d=i("MOE4"),h=i("0IaG"),f=i("A9p3"),p=i("3LUQ"),m=i("Wp6s"),b=i("bTqV"),g=i("Qu3c"),v=i("NFeN"),y=i("ofXK"),k=i("cWTo");function w(e,t){if(1&e&&(s.Rb(0,"div",4),s.Mb(1,"ag-grid-angular",5),s.Qb()),2&e){var n=s.cc();s.Ab(1),s.hc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var S,P,A=((S=function(){function t(n,r,i,o,a){e(this,t),this.syncProductsService=n,this.ordersService=r,this.dialog=i,this.confirmService=o,this.alertService=a,this.rowData=[],this.duplications=[],this.modules=[],this.disableImport=!1,this.defineHeader(),this.setupOptions()}return n(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}},{key:"refresh",value:function(){var e=this;this.syncProductsService.getShopifyProducts().subscribe(function(t){t.status&&(e.rowData=t.data,e.gridApi.setRowData(t.data),e.setAutoSize())})}},{key:"defineHeader",value:function(){this.columns=[{field:"id",headerName:"Product Id"},{field:"productName",headerName:"Product name"},{field:"productTitle",headerName:"Product title"}]}},{key:"setupOptions",value:function(){this.options={pagination:!1,defaultColDef:{filter:!1,sortable:!1,resizable:!0},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0}}},{key:"insertOrders",value:function(){var e=this;this.syncProductsService.import(this.rowData).subscribe(function(t){t.status?e.onSuccess(t.message):(console.log(t),e.disableImport=!1,e.onError(t.message))},function(t){e.disableImport=!1,console.log(t),e.onError(t.message)})}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e),this.refresh()}},{key:"setAutoSize",value:function(){var e,t,n=[];null===(e=this.gridColumnApi.getAllColumns())||void 0===e||e.forEach(function(e){n.push(e.colId)}),null===(t=this.gridColumnApi)||void 0===t||t.autoSizeColumns(n,!1)}}]),t}()).\u0275fac=function(e){return new(e||S)(s.Lb(l),s.Lb(d.a),s.Lb(h.b),s.Lb(f.a),s.Lb(p.a))},S.\u0275cmp=s.Fb({type:S,selectors:[["ct-users-list"]],decls:8,vars:2,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","color","primary","matTooltip","Import",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(s.Rb(0,"mat-card",0),s.Rb(1,"button",1),s.Yb("click",function(){return t.insertOrders()}),s.Rb(2,"mat-icon"),s.xc(3,"publish"),s.Qb(),s.Qb(),s.Rb(4,"button",2),s.Yb("click",function(){return t.refresh()}),s.Rb(5,"mat-icon"),s.xc(6,"refresh"),s.Qb(),s.Qb(),s.Qb(),s.wc(7,w,2,3,"div",3)),2&e&&(s.Ab(1),s.hc("disabled",0===t.rowData.length||t.disableImport),s.Ab(6),s.hc("ngIf",t.columns))},directives:[m.a,b.a,g.a,v.a,y.k,k.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),S),C=i("PCNd"),M=i("vvyD"),O=i("3Pt+"),E=((P=function t(){e(this,t)}).\u0275mod=s.Jb({type:P}),P.\u0275inj=s.Ib({factory:function(e){return new(e||P)},imports:[[y.c,C.a,k.b.withComponents(),M.a,O.h,O.q,a.e.forChild([{path:"",component:A,pathMatch:"full"}])]]}),P)}}])}();