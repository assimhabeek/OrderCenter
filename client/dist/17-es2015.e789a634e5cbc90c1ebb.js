(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{hNpw:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ActiveOrdersModule",function(){return active_orders_module_ActiveOrdersModule});var router=__webpack_require__("tyNb"),tslib_es6=__webpack_require__("mrSG"),mat_select_component=__webpack_require__("sU9S"),tap=__webpack_require__("vkgz"),main=__webpack_require__("cdsW"),fesm2015_forms=__webpack_require__("3Pt+"),Helpers=__webpack_require__("r4zg"),tooltip_component=__webpack_require__("GGDx"),mat_checkbox_component=__webpack_require__("tXqc"),mat_make_model_select_component=__webpack_require__("Raaw"),fesm2015_dialog=__webpack_require__("0IaG"),core=__webpack_require__("fXoL"),orders_service=__webpack_require__("MOE4"),vehicles_service=__webpack_require__("PAny"),alert_service=__webpack_require__("3LUQ"),form_field=__webpack_require__("kmnG"),input=__webpack_require__("qFsG"),common=__webpack_require__("ofXK"),fesm2015_select=__webpack_require__("d3UM"),fesm2015_button=__webpack_require__("bTqV"),fesm2015_core=__webpack_require__("FKr1");function ActiveOrdersFormComponent_mat_error_10_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-error"),core.Qb(1,"strong"),core.wc(2,"OrderNo is required"),core.Pb(),core.Pb())}function ActiveOrdersFormComponent_mat_option_35_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r11=ctx.$implicit;core.gc("value",x_r11),core.Ab(1),core.xc(x_r11)}}function ActiveOrdersFormComponent_mat_option_40_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r12=ctx.$implicit;core.gc("value",x_r12),core.Ab(1),core.xc(x_r12)}}function ActiveOrdersFormComponent_mat_option_45_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r13=ctx.$implicit;core.gc("value",x_r13),core.Ab(1),core.xc(x_r13)}}function ActiveOrdersFormComponent_mat_option_50_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r14=ctx.$implicit;core.gc("value",x_r14),core.Ab(1),core.xc(x_r14)}}function ActiveOrdersFormComponent_mat_option_55_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r15=ctx.$implicit;core.gc("value",x_r15),core.Ab(1),core.xc(x_r15)}}function ActiveOrdersFormComponent_mat_option_60_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r16=ctx.$implicit;core.gc("value",x_r16),core.Ab(1),core.xc(x_r16)}}function ActiveOrdersFormComponent_mat_option_65_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r17=ctx.$implicit;core.gc("value",x_r17),core.Ab(1),core.xc(x_r17)}}function ActiveOrdersFormComponent_mat_option_70_Template(rf,ctx){if(1&rf&&(core.Qb(0,"mat-option",34),core.wc(1),core.Pb()),2&rf){const x_r18=ctx.$implicit;core.gc("value",x_r18),core.Ab(1),core.xc(x_r18)}}let active_orders_form_component_ActiveOrdersFormComponent=(()=>{class ActiveOrdersFormComponent{constructor(dialogRef,data,ordersService,vehiclesService,alertService){this.dialogRef=dialogRef,this.data=data,this.ordersService=ordersService,this.vehiclesService=vehiclesService,this.alertService=alertService,this.lowBeam=[],this.highBeam=[],this.fogLight=[],this.hbCanBus=[],this.lbCanBus=[],this.years=[],this.make=[],this.model=[]}ngOnInit(){this.ordersService.getSKUs().subscribe(skus=>{this.highBeam=skus.HIGH_BEAM||this.ordersService.addEmptyAndCompletedToSkus([]),this.lowBeam=skus.LOW_BEAM||this.ordersService.addEmptyAndCompletedToSkus([]),this.fogLight=skus.FOG_LIGHT||this.ordersService.addEmptyAndCompletedToSkus([]),this.hbCanBus=skus.HB_CAN_BUS||this.ordersService.addEmptyAndCompletedToSkus([]),this.lbCanBus=skus.LB_CAN_BUS||this.ordersService.addEmptyAndCompletedToSkus([])}),this.vehiclesService.getYear().subscribe(years=>{this.years=years})}onYearChange(){this.vehiclesService.getMake(this.data.vehicleYear).then(make=>{this.make=make})}onMakeChange(){this.vehiclesService.getModel(this.data.vehicleYear,this.data.vehicleMake).then(model=>{this.model=model})}cancel(){this.dialogRef.close(!1)}save($event){$event.invalid||this.dialogRef.close(this.data)}}return ActiveOrdersFormComponent.ɵfac=function(t){return new(t||ActiveOrdersFormComponent)(core.Lb(fesm2015_dialog.g),core.Lb(fesm2015_dialog.a),core.Lb(orders_service.a),core.Lb(vehicles_service.a),core.Lb(alert_service.a))},ActiveOrdersFormComponent.ɵcmp=core.Fb({type:ActiveOrdersFormComponent,selectors:[["ct-orders-form"]],decls:124,vars:36,consts:[["mat-dialog-title",""],["novalidate",""],["orderForm","ngForm"],["floatLabel","always"],["matInput","","name","orderNo","type","text",3,"ngModel","required","ngModelChange"],["orderNo","ngModel"],[4,"ngIf"],["matInput","","name","quantity","type","number",3,"ngModel","ngModelChange"],["matInput","","name","productName","type","text",3,"ngModel","ngModelChange"],["matInput","","name","productTitle","type","text",3,"ngModel","ngModelChange"],["matInput","","name","bulbType","type","text",3,"ngModel","ngModelChange"],["matInput","","name","bulbTypeFogLight","type","text",3,"ngModel","ngModelChange"],["name","highBeam",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","lowBeam",3,"ngModel","ngModelChange"],["name","fogLight",3,"ngModel","ngModelChange"],["name","hbCanBus",3,"ngModel","ngModelChange"],["name","vehicleYear",3,"ngModel","ngModelChange"],["name","vehicleMake",3,"ngModel","ngModelChange"],["name","vehicleModel",3,"ngModel","ngModelChange"],["matInput","","name","orderNotes","type","text",3,"ngModel","ngModelChange"],["matInput","","name","additionalDetails","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingName","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingAddress1","type","text",3,"ngModel","ngModelChange"],["matInput","","name","address2","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingCity","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingZip","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingProvince","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingCountryCode","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingCountry","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingPhone","type","text",3,"ngModel","ngModelChange"],["matInput","","name","shippingCompany","type","text",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["cdkFocusInitial","","color","primary","mat-button","",3,"click"],[3,"value"]],template:function(rf,ctx){if(1&rf){const _r19=core.Rb();core.Qb(0,"h1",0),core.wc(1,"Add New"),core.Pb(),core.Qb(2,"form",1,2),core.Qb(4,"mat-dialog-content"),core.Qb(5,"mat-form-field",3),core.Qb(6,"mat-label"),core.wc(7,"OrderNo"),core.Pb(),core.Qb(8,"input",4,5),core.Xb("ngModelChange",function($event){return ctx.data.orderNo=$event}),core.Pb(),core.vc(10,ActiveOrdersFormComponent_mat_error_10_Template,3,0,"mat-error",6),core.Pb(),core.Qb(11,"mat-form-field",3),core.Qb(12,"mat-label"),core.wc(13,"Quantity"),core.Pb(),core.Qb(14,"input",7),core.Xb("ngModelChange",function($event){return ctx.data.quantity=$event}),core.Pb(),core.Pb(),core.Qb(15,"mat-form-field",3),core.Qb(16,"mat-label"),core.wc(17,"Product Name"),core.Pb(),core.Qb(18,"input",8),core.Xb("ngModelChange",function($event){return ctx.data.productName=$event}),core.Pb(),core.Pb(),core.Qb(19,"mat-form-field",3),core.Qb(20,"mat-label"),core.wc(21,"Product Title"),core.Pb(),core.Qb(22,"input",9),core.Xb("ngModelChange",function($event){return ctx.data.productTitle=$event}),core.Pb(),core.Pb(),core.Qb(23,"mat-form-field",3),core.Qb(24,"mat-label"),core.wc(25,"Bulb Type"),core.Pb(),core.Qb(26,"input",10),core.Xb("ngModelChange",function($event){return ctx.data.bulbType=$event}),core.Pb(),core.Pb(),core.Qb(27,"mat-form-field",3),core.Qb(28,"mat-label"),core.wc(29,"Bulb Type Fog Light"),core.Pb(),core.Qb(30,"input",11),core.Xb("ngModelChange",function($event){return ctx.data.bulbTypeFogLight=$event}),core.Pb(),core.Pb(),core.Qb(31,"mat-form-field",3),core.Qb(32,"mat-label"),core.wc(33,"High Beam"),core.Pb(),core.Qb(34,"mat-select",12),core.Xb("ngModelChange",function($event){return ctx.data.highBeam=$event}),core.vc(35,ActiveOrdersFormComponent_mat_option_35_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(36,"mat-form-field",3),core.Qb(37,"mat-label"),core.wc(38,"Low Beam"),core.Pb(),core.Qb(39,"mat-select",14),core.Xb("ngModelChange",function($event){return ctx.data.lowBeam=$event}),core.vc(40,ActiveOrdersFormComponent_mat_option_40_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(41,"mat-form-field",3),core.Qb(42,"mat-label"),core.wc(43,"Fog Light"),core.Pb(),core.Qb(44,"mat-select",15),core.Xb("ngModelChange",function($event){return ctx.data.fogLight=$event}),core.vc(45,ActiveOrdersFormComponent_mat_option_45_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(46,"mat-form-field",3),core.Qb(47,"mat-label"),core.wc(48,"Hb Can Bus"),core.Pb(),core.Qb(49,"mat-select",16),core.Xb("ngModelChange",function($event){return ctx.data.hbCanBus=$event}),core.vc(50,ActiveOrdersFormComponent_mat_option_50_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(51,"mat-form-field",3),core.Qb(52,"mat-label"),core.wc(53,"Lb Can Bus"),core.Pb(),core.Qb(54,"mat-select",16),core.Xb("ngModelChange",function($event){return ctx.data.lbCanBus=$event}),core.vc(55,ActiveOrdersFormComponent_mat_option_55_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(56,"mat-form-field",3),core.Qb(57,"mat-label"),core.wc(58,"Year"),core.Pb(),core.Qb(59,"mat-select",17),core.Xb("ngModelChange",function($event){return ctx.data.vehicleYear=$event,ctx.onYearChange()}),core.vc(60,ActiveOrdersFormComponent_mat_option_60_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(61,"mat-form-field",3),core.Qb(62,"mat-label"),core.wc(63,"Make"),core.Pb(),core.Qb(64,"mat-select",18),core.Xb("ngModelChange",function($event){return ctx.data.vehicleMake=$event,ctx.onMakeChange()}),core.vc(65,ActiveOrdersFormComponent_mat_option_65_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(66,"mat-form-field",3),core.Qb(67,"mat-label"),core.wc(68,"Model"),core.Pb(),core.Qb(69,"mat-select",19),core.Xb("ngModelChange",function($event){return ctx.data.vehicleModel=$event}),core.vc(70,ActiveOrdersFormComponent_mat_option_70_Template,2,2,"mat-option",13),core.Pb(),core.Pb(),core.Qb(71,"mat-form-field",3),core.Qb(72,"mat-label"),core.wc(73,"Order Notes"),core.Pb(),core.Qb(74,"input",20),core.Xb("ngModelChange",function($event){return ctx.data.orderNotes=$event}),core.Pb(),core.Pb(),core.Qb(75,"mat-form-field",3),core.Qb(76,"mat-label"),core.wc(77,"Additional Details"),core.Pb(),core.Qb(78,"input",21),core.Xb("ngModelChange",function($event){return ctx.data.additionalDetails=$event}),core.Pb(),core.Pb(),core.Qb(79,"mat-form-field",3),core.Qb(80,"mat-label"),core.wc(81,"Shipping Name"),core.Pb(),core.Qb(82,"input",22),core.Xb("ngModelChange",function($event){return ctx.data.shippingName=$event}),core.Pb(),core.Pb(),core.Qb(83,"mat-form-field",3),core.Qb(84,"mat-label"),core.wc(85,"Shipping Address1"),core.Pb(),core.Qb(86,"input",23),core.Xb("ngModelChange",function($event){return ctx.data.shippingAddress1=$event}),core.Pb(),core.Pb(),core.Qb(87,"mat-form-field",3),core.Qb(88,"mat-label"),core.wc(89,"Shipping Address2"),core.Pb(),core.Qb(90,"input",24),core.Xb("ngModelChange",function($event){return ctx.data.address2=$event}),core.Pb(),core.Pb(),core.Qb(91,"mat-form-field",3),core.Qb(92,"mat-label"),core.wc(93,"Shipping City"),core.Pb(),core.Qb(94,"input",25),core.Xb("ngModelChange",function($event){return ctx.data.shippingCity=$event}),core.Pb(),core.Pb(),core.Qb(95,"mat-form-field",3),core.Qb(96,"mat-label"),core.wc(97,"Shipping Zip"),core.Pb(),core.Qb(98,"input",26),core.Xb("ngModelChange",function($event){return ctx.data.shippingZip=$event}),core.Pb(),core.Pb(),core.Qb(99,"mat-form-field",3),core.Qb(100,"mat-label"),core.wc(101,"Shipping Province"),core.Pb(),core.Qb(102,"input",27),core.Xb("ngModelChange",function($event){return ctx.data.shippingProvince=$event}),core.Pb(),core.Pb(),core.Qb(103,"mat-form-field",3),core.Qb(104,"mat-label"),core.wc(105,"Shipping Country Code"),core.Pb(),core.Qb(106,"input",28),core.Xb("ngModelChange",function($event){return ctx.data.shippingCountryCode=$event}),core.Pb(),core.Pb(),core.Qb(107,"mat-form-field",3),core.Qb(108,"mat-label"),core.wc(109,"Shipping Country"),core.Pb(),core.Qb(110,"input",29),core.Xb("ngModelChange",function($event){return ctx.data.shippingCountry=$event}),core.Pb(),core.Pb(),core.Qb(111,"mat-form-field",3),core.Qb(112,"mat-label"),core.wc(113,"Shipping Phone"),core.Pb(),core.Qb(114,"input",30),core.Xb("ngModelChange",function($event){return ctx.data.shippingPhone=$event}),core.Pb(),core.Pb(),core.Qb(115,"mat-form-field",3),core.Qb(116,"mat-label"),core.wc(117,"Shipping Company"),core.Pb(),core.Qb(118,"input",31),core.Xb("ngModelChange",function($event){return ctx.data.shippingCompany=$event}),core.Pb(),core.Pb(),core.Pb(),core.Qb(119,"mat-dialog-actions"),core.Qb(120,"button",32),core.Xb("click",function(){return ctx.cancel()}),core.wc(121,"Cancel"),core.Pb(),core.Qb(122,"button",33),core.Xb("click",function(){core.nc(_r19);const _r0=core.lc(3);return ctx.save(_r0)}),core.wc(123,"Save"),core.Pb(),core.Pb(),core.Pb()}if(2&rf){const _r1=core.lc(9);core.Ab(8),core.gc("ngModel",ctx.data.orderNo)("required",!0),core.Ab(2),core.gc("ngIf",_r1.hasError("required")),core.Ab(4),core.gc("ngModel",ctx.data.quantity),core.Ab(4),core.gc("ngModel",ctx.data.productName),core.Ab(4),core.gc("ngModel",ctx.data.productTitle),core.Ab(4),core.gc("ngModel",ctx.data.bulbType),core.Ab(4),core.gc("ngModel",ctx.data.bulbTypeFogLight),core.Ab(4),core.gc("ngModel",ctx.data.highBeam),core.Ab(1),core.gc("ngForOf",ctx.highBeam),core.Ab(4),core.gc("ngModel",ctx.data.lowBeam),core.Ab(1),core.gc("ngForOf",ctx.lowBeam),core.Ab(4),core.gc("ngModel",ctx.data.fogLight),core.Ab(1),core.gc("ngForOf",ctx.fogLight),core.Ab(4),core.gc("ngModel",ctx.data.hbCanBus),core.Ab(1),core.gc("ngForOf",ctx.hbCanBus),core.Ab(4),core.gc("ngModel",ctx.data.lbCanBus),core.Ab(1),core.gc("ngForOf",ctx.lbCanBus),core.Ab(4),core.gc("ngModel",ctx.data.vehicleYear),core.Ab(1),core.gc("ngForOf",ctx.years),core.Ab(4),core.gc("ngModel",ctx.data.vehicleMake),core.Ab(1),core.gc("ngForOf",ctx.make),core.Ab(4),core.gc("ngModel",ctx.data.vehicleModel),core.Ab(1),core.gc("ngForOf",ctx.model),core.Ab(4),core.gc("ngModel",ctx.data.orderNotes),core.Ab(4),core.gc("ngModel",ctx.data.additionalDetails),core.Ab(4),core.gc("ngModel",ctx.data.shippingName),core.Ab(4),core.gc("ngModel",ctx.data.shippingAddress1),core.Ab(4),core.gc("ngModel",ctx.data.address2),core.Ab(4),core.gc("ngModel",ctx.data.shippingCity),core.Ab(4),core.gc("ngModel",ctx.data.shippingZip),core.Ab(4),core.gc("ngModel",ctx.data.shippingProvince),core.Ab(4),core.gc("ngModel",ctx.data.shippingCountryCode),core.Ab(4),core.gc("ngModel",ctx.data.shippingCountry),core.Ab(4),core.gc("ngModel",ctx.data.shippingPhone),core.Ab(4),core.gc("ngModel",ctx.data.shippingCompany)}},directives:[fesm2015_dialog.h,fesm2015_forms.t,fesm2015_forms.m,fesm2015_forms.n,fesm2015_dialog.e,form_field.c,form_field.f,input.b,fesm2015_forms.c,fesm2015_forms.l,fesm2015_forms.o,fesm2015_forms.r,common.k,fesm2015_forms.p,fesm2015_select.a,common.j,fesm2015_dialog.c,fesm2015_button.a,form_field.b,fesm2015_core.k],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),ActiveOrdersFormComponent})();var confirm_service=__webpack_require__("A9p3"),card=__webpack_require__("Wp6s"),tooltip=__webpack_require__("Qu3c"),icon=__webpack_require__("NFeN"),datepicker=__webpack_require__("iadO"),menu=__webpack_require__("STbY"),ag_grid_community_angular=__webpack_require__("gwh1");function ActiveOrdersListComponent_mat_icon_28_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-icon"),core.wc(1,"checked"),core.Pb())}function ActiveOrdersListComponent_mat_icon_32_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-icon"),core.wc(1,"checked"),core.Pb())}function ActiveOrdersListComponent_mat_icon_36_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-icon"),core.wc(1,"checked"),core.Pb())}function ActiveOrdersListComponent_mat_icon_40_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-icon"),core.wc(1,"checked"),core.Pb())}function ActiveOrdersListComponent_mat_icon_44_Template(rf,ctx){1&rf&&(core.Qb(0,"mat-icon"),core.wc(1,"checked"),core.Pb())}function ActiveOrdersListComponent_div_50_Template(rf,ctx){if(1&rf&&(core.Qb(0,"div",17),core.Mb(1,"ag-grid-angular",18),core.Pb()),2&rf){const ctx_r7=core.bc();core.Ab(1),core.gc("gridOptions",ctx_r7.options)("modules",ctx_r7.modules)("rowData",ctx_r7.rowData)}}let active_orders_list_component_ActiveOrdersListComponent=(()=>{class ActiveOrdersListComponent{constructor(ordersService,dialog,confirmService,alertService){this.ordersService=ordersService,this.dialog=dialog,this.confirmService=confirmService,this.alertService=alertService,this.orderType="all",this.orderDateForm=new fesm2015_forms.f({orderDate:new fesm2015_forms.d(Helpers.a.now())}),this.rowData=[],this.modules=[],this.modules=[main.a],this.loadHeaders().subscribe(()=>{this.setupOptions()},error=>{console.log(error),this.onError("Could not load grid info")})}onGridReady(params){var _a;this.gridApi=params.api,this.gridColumnApi=params.columnApi,this.addFilter({orderDate:{filter:Helpers.a.toMysqlDate(this.orderDateForm.value.orderDate)}}),this.addFilter({orderStatus:{filter:Helpers.a.orderStatus.ORDER_ACTIVE}}),null===(_a=this.gridApi)||void 0===_a||_a.setServerSideDatasource(this.ordersService),this.listenToOrderDateForm()}addFilter(filter){if(this.gridApi){const filterModel=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(filterModel,filter))}}listenToOrderDateForm(){this.orderDateForm.valueChanges.subscribe(x=>{this.addFilter({orderDate:{filter:Helpers.a.toMysqlDate(x.orderDate)}})})}orderTypeChanged(newValue){this.orderType=newValue,this.addFilter("all"===this.orderType?{completed:{}}:{completed:{filter:this.orderType}})}loadHeaders(){return this.ordersService.getHeader().pipe(Object(tap.a)(header=>this.columns=header))}setupOptions(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,tooltipComponent:"tooltipRenderer",filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowModelType:"serverSide",serverSideStoreType:"partial",rowSelection:"single",cacheBlockSize:100,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:mat_select_component.a,makeSelectEditor:mat_make_model_select_component.a,tooltipRenderer:tooltip_component.a,checkboxRenderer:mat_checkbox_component.a}}}refresh(){this.gridApi.refreshServerSideStore({purge:!0})}setValue(params){return Object(tslib_es6.a)(this,void 0,void 0,function*(){const toUpdate={id:params.data.id,name:params.colDef.field,value:params.newValue};params.data[params.colDef.field]=params.newValue;const response=yield this.ordersService.updateCell(toUpdate);(response.status?this.onSuccess.bind(this):this.onError.bind(this))(response.message);const node=params.node;return"vehicleYear"===params.colDef.field?node.setDataValue("vehicleMake",null):"vehicleMake"===params.colDef.field&&node.setDataValue("vehicleModel",null),response.status&&node.setDataValue("lastModification",Helpers.a.formatDate(Helpers.a.now())),response.status})}noRowSelected(){const selectedRows=this.gridApi?this.gridApi.getSelectedNodes():null;return!selectedRows||0===selectedRows.length}onRemove(){const selectedRows=this.gridApi.getSelectedNodes();if(!selectedRows||0===selectedRows.length)return;const selectedRow=selectedRows[0];this.confirmService.requestDeleteConfirmation().subscribe(confirmation=>{confirmation&&this.removeRow(selectedRow)})}removeRow(selectedRow){this.ordersService.deleteRow(+selectedRow.data.id).subscribe(x=>{x.status?(this.gridApi.deselectAll(),this.gridApi.refreshServerSideStore({purge:!0}),this.onSuccess(x.message)):this.onError(x.message)})}onAdd(){this.openDialog({})}isExternalFilterPresent(){return"all"!==this.orderType}onDuplicate(){const selectedRows=this.gridApi.getSelectedNodes();selectedRows&&0!==selectedRows.length&&this.openDialog(selectedRows[0].data)}openDialog(selectedRow){this.dialog.open(active_orders_form_component_ActiveOrdersFormComponent,{width:"100%",disableClose:!0,data:selectedRow}).afterClosed().subscribe(result=>{result&&this.ordersService.addRow(result).subscribe(x=>{x.status?(this.gridApi.deselectAll(),this.gridApi.refreshServerSideStore({purge:!0}),this.onSuccess(x.message)):(console.log(x),this.onError(x.message))})})}onSuccess(message){this.alertService.alertSuccess(message)}onError(error){this.alertService.alertError(error)}clearFilters(){var _a;this.orderDateForm.reset({orderDate:null}),this.orderType="all",null===(_a=this.gridApi)||void 0===_a||_a.setFilterModel({orderStatus:{filter:Helpers.a.orderStatus.ORDER_ACTIVE}})}}return ActiveOrdersListComponent.ɵfac=function(t){return new(t||ActiveOrdersListComponent)(core.Lb(orders_service.a),core.Lb(fesm2015_dialog.b),core.Lb(confirm_service.a),core.Lb(alert_service.a))},ActiveOrdersListComponent.ɵcmp=core.Fb({type:ActiveOrdersListComponent,selectors:[["ct-order-list"]],decls:51,vars:13,consts:[[1,"ct-toolbar","mat-elevation-z1"],["color","primary","mat-icon-button","","matTooltip","Add",3,"click"],["color","primary","mat-icon-button","","matTooltip","Duplicate",3,"disabled","click"],["color","warn","mat-icon-button","","matTooltip","Remove",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],[1,"ct-spacer"],[3,"formGroup"],[1,"ct-order-date"],["formControlName","orderDate","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-icon-button","","matTooltip","Status filter",1,"ct-filter",3,"color","matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngIf"],["color","accent","mat-icon-button","","matTooltip","Reset Filters",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(rf,ctx){if(1&rf&&(core.Qb(0,"mat-card",0),core.Qb(1,"button",1),core.Xb("click",function(){return ctx.onAdd()}),core.Qb(2,"mat-icon"),core.wc(3,"add"),core.Pb(),core.Pb(),core.Qb(4,"button",2),core.Xb("click",function(){return ctx.onDuplicate()}),core.Qb(5,"mat-icon"),core.wc(6,"content_copy"),core.Pb(),core.Pb(),core.Qb(7,"button",3),core.Xb("click",function(){return ctx.onRemove()}),core.Qb(8,"mat-icon"),core.wc(9,"delete"),core.Pb(),core.Pb(),core.Qb(10,"button",4),core.Xb("click",function(){return ctx.refresh()}),core.Qb(11,"mat-icon"),core.wc(12,"refresh"),core.Pb(),core.Pb(),core.Mb(13,"span",5),core.Qb(14,"div",6),core.Qb(15,"mat-form-field",7),core.Qb(16,"mat-label"),core.wc(17,"Choose a date"),core.Pb(),core.Mb(18,"input",8),core.Mb(19,"mat-datepicker-toggle",9),core.Mb(20,"mat-datepicker",null,10),core.Pb(),core.Pb(),core.Qb(22,"button",11),core.Qb(23,"mat-icon"),core.wc(24,"filter_alt"),core.Pb(),core.Pb(),core.Qb(25,"mat-menu",null,12),core.Qb(27,"button",13),core.Xb("click",function(){return ctx.orderTypeChanged("all")}),core.vc(28,ActiveOrdersListComponent_mat_icon_28_Template,2,0,"mat-icon",14),core.Qb(29,"span"),core.wc(30,"All"),core.Pb(),core.Pb(),core.Qb(31,"button",13),core.Xb("click",function(){return ctx.orderTypeChanged("completed")}),core.vc(32,ActiveOrdersListComponent_mat_icon_32_Template,2,0,"mat-icon",14),core.Qb(33,"span"),core.wc(34,"Completed"),core.Pb(),core.Pb(),core.Qb(35,"button",13),core.Xb("click",function(){return ctx.orderTypeChanged("carifex completed")}),core.vc(36,ActiveOrdersListComponent_mat_icon_36_Template,2,0,"mat-icon",14),core.Qb(37,"span"),core.wc(38,"CariFex Completed"),core.Pb(),core.Pb(),core.Qb(39,"button",13),core.Xb("click",function(){return ctx.orderTypeChanged("non carifex completed")}),core.vc(40,ActiveOrdersListComponent_mat_icon_40_Template,2,0,"mat-icon",14),core.Qb(41,"span"),core.wc(42,"Non CariFex Completed"),core.Pb(),core.Pb(),core.Qb(43,"button",13),core.Xb("click",function(){return ctx.orderTypeChanged("uncompleted")}),core.vc(44,ActiveOrdersListComponent_mat_icon_44_Template,2,0,"mat-icon",14),core.Qb(45,"span"),core.wc(46,"Uncompleted"),core.Pb(),core.Pb(),core.Pb(),core.Qb(47,"button",15),core.Xb("click",function(){return ctx.clearFilters()}),core.Qb(48,"mat-icon"),core.wc(49,"cancel"),core.Pb(),core.Pb(),core.Pb(),core.vc(50,ActiveOrdersListComponent_div_50_Template,2,3,"div",16)),2&rf){const _r0=core.lc(21),_r1=core.lc(26);core.Ab(4),core.gc("disabled",ctx.noRowSelected()),core.Ab(3),core.gc("disabled",ctx.noRowSelected()),core.Ab(7),core.gc("formGroup",ctx.orderDateForm),core.Ab(4),core.gc("matDatepicker",_r0),core.Ab(1),core.gc("for",_r0),core.Ab(3),core.gc("color","all"!=ctx.orderType?"primary":"")("matMenuTriggerFor",_r1),core.Ab(6),core.gc("ngIf","all"===ctx.orderType),core.Ab(4),core.gc("ngIf","completed"===ctx.orderType),core.Ab(4),core.gc("ngIf","carifex completed"===ctx.orderType),core.Ab(4),core.gc("ngIf","non carifex completed"===ctx.orderType),core.Ab(4),core.gc("ngIf","uncompleted"===ctx.orderType),core.Ab(6),core.gc("ngIf",ctx.columns)}},directives:[card.a,fesm2015_button.a,tooltip.a,icon.a,fesm2015_forms.m,fesm2015_forms.g,form_field.c,form_field.f,fesm2015_forms.c,input.b,datepicker.d,fesm2015_forms.l,fesm2015_forms.e,datepicker.f,form_field.h,datepicker.c,menu.d,menu.a,menu.b,common.k,ag_grid_community_angular.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),ActiveOrdersListComponent})();var shared_module=__webpack_require__("PCNd"),material_module=__webpack_require__("vvyD");let active_orders_module_ActiveOrdersModule=(()=>{class ActiveOrdersModule{}return ActiveOrdersModule.ɵmod=core.Jb({type:ActiveOrdersModule}),ActiveOrdersModule.ɵinj=core.Ib({factory:function(t){return new(t||ActiveOrdersModule)},imports:[[common.c,shared_module.a,ag_grid_community_angular.b.withComponents(),material_module.a,fesm2015_forms.h,fesm2015_forms.q,router.f.forChild([{path:"",component:active_orders_list_component_ActiveOrdersListComponent,pathMatch:"full"}])]]}),ActiveOrdersModule})()}}]);