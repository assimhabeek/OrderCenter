(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{tBFD:function(e,t,i){"use strict";i.r(t),i.d(t,"VehiclesModule",function(){return E});var o=i("tyNb"),n=i("mrSG"),a=i("sU9S"),r=i("vkgz"),c=i("cdsW"),l=i("0IaG"),s=i("fXoL"),d=i("PAny"),b=i("3Pt+"),g=i("kmnG"),m=i("qFsG"),h=i("ofXK"),u=i("d3UM"),p=i("bTqV"),f=i("FKr1");function w(e,t){1&e&&(s.Qb(0,"mat-error"),s.Qb(1,"strong"),s.wc(2,"Year is required"),s.Pb(),s.Pb())}function v(e,t){1&e&&(s.Qb(0,"mat-error"),s.Qb(1,"strong"),s.wc(2,"Make is required"),s.Pb(),s.Pb())}function P(e,t){1&e&&(s.Qb(0,"mat-error"),s.Qb(1,"strong"),s.wc(2,"Model is required"),s.Pb(),s.Pb())}function M(e,t){if(1&e&&(s.Qb(0,"mat-option",18),s.wc(1),s.Pb()),2&e){const e=t.$implicit;s.gc("value",e),s.Ab(1),s.xc(e)}}function A(e,t){if(1&e&&(s.Qb(0,"mat-option",18),s.wc(1),s.Pb()),2&e){const e=t.$implicit;s.gc("value",e),s.Ab(1),s.xc(e)}}function Q(e,t){if(1&e&&(s.Qb(0,"mat-option",18),s.wc(1),s.Pb()),2&e){const e=t.$implicit;s.gc("value",e),s.Ab(1),s.xc(e)}}function S(e,t){if(1&e&&(s.Qb(0,"mat-option",18),s.wc(1),s.Pb()),2&e){const e=t.$implicit;s.gc("value",e),s.Ab(1),s.xc(e)}}let C=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.data=t,this.vehiclesService=i}ngOnInit(){this.vehiclesService.getSKUs().subscribe(e=>{this.highBeam=e.HIGH_BEAM,this.lowBeam=e.LOW_BEAM,this.fogLight=e.FOG_LIGHT,this.highLowBeam=this.highBeam.filter(e=>this.lowBeam.includes(e))})}cancel(){this.dialogRef.close(!1)}save(e){e.invalid||this.dialogRef.close(this.data)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(l.g),s.Lb(l.a),s.Lb(d.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-vehicles-form"]],decls:48,vars:17,consts:[["mat-dialog-title",""],["novalidate",""],["orderForm","ngForm"],["floatLabel","always"],["matInput","","name","year","type","number",3,"ngModel","required","ngModelChange"],["year","ngModel"],[4,"ngIf"],["matInput","","name","make","type","text",3,"ngModel","required","ngModelChange"],["make","ngModel"],["matInput","","name","model","type","text",3,"ngModel","required","ngModelChange"],["model","ngModel"],["name","highLowBeam",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","highBeam",3,"ngModel","ngModelChange"],["name","lowBeam",3,"ngModel","ngModelChange"],["name","fogLight",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["cdkFocusInitial","","color","primary","mat-button","",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=s.Rb();s.Qb(0,"h1",0),s.wc(1,"Add New"),s.Pb(),s.Qb(2,"form",1,2),s.Qb(4,"mat-dialog-content"),s.Qb(5,"mat-form-field",3),s.Qb(6,"mat-label"),s.wc(7,"Year"),s.Pb(),s.Qb(8,"input",4,5),s.Xb("ngModelChange",function(e){return t.data.year=e}),s.Pb(),s.vc(10,w,3,0,"mat-error",6),s.Pb(),s.Qb(11,"mat-form-field",3),s.Qb(12,"mat-label"),s.wc(13,"Make"),s.Pb(),s.Qb(14,"input",7,8),s.Xb("ngModelChange",function(e){return t.data.make=e}),s.Pb(),s.vc(16,v,3,0,"mat-error",6),s.Pb(),s.Qb(17,"mat-form-field",3),s.Qb(18,"mat-label"),s.wc(19,"Model"),s.Pb(),s.Qb(20,"input",9,10),s.Xb("ngModelChange",function(e){return t.data.model=e}),s.Pb(),s.vc(22,P,3,0,"mat-error",6),s.Pb(),s.Qb(23,"mat-form-field",3),s.Qb(24,"mat-label"),s.wc(25,"High And Low Beam"),s.Pb(),s.Qb(26,"mat-select",11),s.Xb("ngModelChange",function(e){return t.data.highLowBeam=e}),s.vc(27,M,2,2,"mat-option",12),s.Pb(),s.Pb(),s.Qb(28,"mat-form-field",3),s.Qb(29,"mat-label"),s.wc(30,"High Beam"),s.Pb(),s.Qb(31,"mat-select",13),s.Xb("ngModelChange",function(e){return t.data.highBeam=e}),s.vc(32,A,2,2,"mat-option",12),s.Pb(),s.Pb(),s.Qb(33,"mat-form-field",3),s.Qb(34,"mat-label"),s.wc(35,"Low Beam"),s.Pb(),s.Qb(36,"mat-select",14),s.Xb("ngModelChange",function(e){return t.data.lowBeam=e}),s.vc(37,Q,2,2,"mat-option",12),s.Pb(),s.Pb(),s.Qb(38,"mat-form-field",3),s.Qb(39,"mat-label"),s.wc(40,"Fog Light"),s.Pb(),s.Qb(41,"mat-select",15),s.Xb("ngModelChange",function(e){return t.data.fogLight=e}),s.vc(42,S,2,2,"mat-option",12),s.Pb(),s.Pb(),s.Pb(),s.Qb(43,"mat-dialog-actions"),s.Qb(44,"button",16),s.Xb("click",function(){return t.cancel()}),s.wc(45,"Cancel"),s.Pb(),s.Qb(46,"button",17),s.Xb("click",function(){s.nc(e);const i=s.lc(3);return t.save(i)}),s.wc(47,"Save"),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=s.lc(9),i=s.lc(15),o=s.lc(21);s.Ab(8),s.gc("ngModel",t.data.year)("required",!0),s.Ab(2),s.gc("ngIf",e.hasError("required")),s.Ab(4),s.gc("ngModel",t.data.make)("required",!0),s.Ab(2),s.gc("ngIf",i.hasError("required")),s.Ab(4),s.gc("ngModel",t.data.model)("required",!0),s.Ab(2),s.gc("ngIf",o.hasError("required")),s.Ab(4),s.gc("ngModel",t.data.highLowBeam),s.Ab(1),s.gc("ngForOf",t.highLowBeam),s.Ab(4),s.gc("ngModel",t.data.highBeam),s.Ab(1),s.gc("ngForOf",t.highBeam),s.Ab(4),s.gc("ngModel",t.data.lowBeam),s.Ab(1),s.gc("ngForOf",t.lowBeam),s.Ab(4),s.gc("ngModel",t.data.fogLight),s.Ab(1),s.gc("ngForOf",t.fogLight)}},directives:[l.h,b.t,b.m,b.n,l.e,g.c,g.f,m.b,b.p,b.c,b.l,b.o,b.r,h.k,u.a,h.j,l.c,p.a,g.b,f.k],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),e})();var O=i("GGDx"),k=i("tXqc"),y=i("Raaw"),L=i("A9p3"),x=i("3LUQ"),B=i("Wp6s"),R=i("Qu3c"),F=i("NFeN"),D=i("gwh1");function _(e,t){if(1&e&&(s.Qb(0,"div",6),s.Mb(1,"ag-grid-angular",7),s.Pb()),2&e){const e=s.bc();s.Ab(1),s.gc("gridOptions",e.options)("modules",e.modules)("rowData",e.rowData)}}let q=(()=>{class e{constructor(e,t,i,o){this.vehiclesService=e,this.dialog=t,this.confirmService=i,this.alertService=o,this.rowData=[],this.modules=[],this.modules=[c.a],this.loadHeaders().subscribe(()=>{this.setupOptions()},e=>{console.log(e),this.onError("Could not load grid info")})}onGridReady(e){var t;this.gridApi=e.api,this.gridColumnApi=e.columnApi,null===(t=this.gridApi)||void 0===t||t.setServerSideDatasource(this.vehiclesService)}addFilter(e){if(this.gridApi){const t=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(t,e))}}loadHeaders(){return this.vehiclesService.getHeader().pipe(Object(r.a)(e=>this.columns=e))}setupOptions(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowModelType:"serverSide",serverSideStoreType:"partial",rowSelection:"single",cacheBlockSize:100,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:a.a,makeSelectEditor:y.a,tooltipRenderer:O.a,checkboxRenderer:k.a}}}refresh(){this.gridApi.refreshServerSideStore({purge:!0})}setValue(e){return Object(n.a)(this,void 0,void 0,function*(){const t={id:e.data.id,name:e.colDef.field,value:e.newValue};e.data[e.colDef.field]=e.newValue;const i=yield this.vehiclesService.updateCell(t);return(i.status?this.onSuccess.bind(this):this.onError.bind(this))(i.message),i.status})}noRowSelected(){const e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}onRemove(){const e=this.gridApi.getSelectedNodes();if(!e||0===e.length)return;const t=e[0];this.confirmService.requestDeleteConfirmation().subscribe(e=>{e&&this.removeRow(t)})}removeRow(e){this.vehiclesService.deleteRow(+e.data.id).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.gridApi.refreshServerSideStore({purge:!0}),this.onSuccess(e.message)):this.onError(e.message)})}onAdd(){this.openDialog({})}onDuplicate(){const e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}openDialog(e){this.dialog.open(C,{width:"100%",disableClose:!0,data:e}).afterClosed().subscribe(e=>{e&&this.vehiclesService.addRow(e).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.gridApi.refreshServerSideStore({purge:!0}),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})})}onSuccess(e){this.alertService.alertSuccess(e)}onError(e){this.alertService.alertError(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(d.a),s.Lb(l.b),s.Lb(L.a),s.Lb(x.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-vehicle-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["color","primary","mat-icon-button","","matTooltip","Add",3,"click"],["color","primary","mat-icon-button","","matTooltip","Duplicate",3,"disabled","click"],["color","warn","mat-icon-button","","matTooltip","Remove",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(s.Qb(0,"mat-card",0),s.Qb(1,"button",1),s.Xb("click",function(){return t.onAdd()}),s.Qb(2,"mat-icon"),s.wc(3,"add"),s.Pb(),s.Pb(),s.Qb(4,"button",2),s.Xb("click",function(){return t.onDuplicate()}),s.Qb(5,"mat-icon"),s.wc(6,"content_copy"),s.Pb(),s.Pb(),s.Qb(7,"button",3),s.Xb("click",function(){return t.onRemove()}),s.Qb(8,"mat-icon"),s.wc(9,"delete"),s.Pb(),s.Pb(),s.Qb(10,"button",4),s.Xb("click",function(){return t.refresh()}),s.Qb(11,"mat-icon"),s.wc(12,"refresh"),s.Pb(),s.Pb(),s.Pb(),s.vc(13,_,2,3,"div",5)),2&e&&(s.Ab(4),s.gc("disabled",t.noRowSelected()),s.Ab(3),s.gc("disabled",t.noRowSelected()),s.Ab(6),s.gc("ngIf",t.columns))},directives:[B.a,p.a,R.a,F.a,h.k,D.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),e})();var X=i("PCNd"),I=i("vvyD");let E=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[h.c,X.a,D.b.withComponents(),I.a,b.h,b.q,o.g.forChild([{path:"",component:q,pathMatch:"full"}])]]}),e})()}}]);