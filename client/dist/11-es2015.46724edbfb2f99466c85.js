(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"6/09":function(e,t,o){"use strict";o.r(t),o.d(t,"SkusModule",function(){return x});var i=o("tyNb"),n=o("mrSG"),a=o("sU9S"),r=o("0IaG"),s=o("fXoL"),c=o("MOE4"),l=o("3Pt+"),d=o("kmnG"),u=o("qFsG"),m=o("ofXK"),b=o("d3UM"),h=o("FKr1"),p=o("bTqV");function g(e,t){1&e&&(s.Rb(0,"mat-error"),s.xc(1," Name is required "),s.Qb())}function f(e,t){1&e&&(s.Rb(0,"mat-error"),s.xc(1," Type is required "),s.Qb())}let v=(()=>{class e{constructor(e,t,o){this.dialogRef=e,this.data=t,this.ordersService=o}cancel(){this.dialogRef.close(!1)}save(e){e.invalid||this.dialogRef.close(this.data)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(r.g),s.Lb(r.a),s.Lb(c.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-skus-form"]],decls:36,vars:5,consts:[["novalidate",""],["skuForm","ngForm"],["mat-dialog-title",""],["floatLabel","always"],["matInput","","name","name","type","text",3,"required","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["name","skuType",3,"ngModel","ngModelChange"],["type","ngModel"],["value","BULB_TYPE"],["value","BULB_TYPE_FOG_LIGHT"],["value","HIGH_BEAM"],["value","LOW_BEAM"],["value","FOG_LIGHT"],["value","HB_CAN_BUS"],["value","LB_CAN_BUS"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(e,t){if(1&e){const e=s.Sb();s.Rb(0,"form",0,1),s.Rb(2,"h1",2),s.xc(3,"Add New"),s.Qb(),s.Rb(4,"mat-dialog-content"),s.Rb(5,"mat-form-field",3),s.Rb(6,"mat-label"),s.xc(7,"Name"),s.Qb(),s.Rb(8,"input",4,5),s.Yb("ngModelChange",function(e){return t.data.name=e}),s.Qb(),s.wc(10,g,2,0,"mat-error",6),s.Qb(),s.Rb(11,"mat-form-field",3),s.Rb(12,"mat-label"),s.xc(13,"Type"),s.Qb(),s.Rb(14,"mat-select",7,8),s.Yb("ngModelChange",function(e){return t.data.skuType=e}),s.Rb(16,"mat-option",9),s.xc(17,"BULB_TYPE"),s.Qb(),s.Rb(18,"mat-option",10),s.xc(19,"BULB_TYPE_FOG_LIGHT"),s.Qb(),s.Rb(20,"mat-option",11),s.xc(21,"HIGH_BEAM"),s.Qb(),s.Rb(22,"mat-option",12),s.xc(23,"LOW_BEAM"),s.Qb(),s.Rb(24,"mat-option",13),s.xc(25,"FOG_LIGHT"),s.Qb(),s.Rb(26,"mat-option",14),s.xc(27,"HB_CAN_BUS"),s.Qb(),s.Rb(28,"mat-option",15),s.xc(29,"LB_CAN_BUS"),s.Qb(),s.Qb(),s.wc(30,f,2,0,"mat-error",6),s.Qb(),s.Qb(),s.Rb(31,"mat-dialog-actions"),s.Rb(32,"button",16),s.Yb("click",function(){return t.cancel()}),s.xc(33,"Cancel"),s.Qb(),s.Rb(34,"button",17),s.Yb("click",function(){s.oc(e);const o=s.mc(1);return t.save(o)}),s.xc(35,"Save"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.mc(9),o=s.mc(15);s.Ab(8),s.hc("required",!0)("ngModel",t.data.name),s.Ab(2),s.hc("ngIf",e.hasError("required")),s.Ab(4),s.hc("ngModel",t.data.skuType),s.Ab(16),s.hc("ngIf",o.hasError("required"))}},directives:[l.t,l.m,l.n,r.h,r.e,d.c,d.f,u.b,l.c,l.r,l.l,l.o,m.k,b.a,h.k,r.c,p.a,d.b],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),e})();var S=o("As+J"),w=o("A9p3"),k=o("3LUQ"),A=o("Wp6s"),R=o("Qu3c"),_=o("NFeN"),y=o("cWTo");function M(e,t){if(1&e&&(s.Rb(0,"div",6),s.Mb(1,"ag-grid-angular",7),s.Qb()),2&e){const e=s.cc();s.Ab(1),s.hc("gridOptions",e.options)("modules",e.modules)("rowData",e.rowData)}}let C=(()=>{class e{constructor(e,t,o,i){this.skusService=e,this.dialog=t,this.confirmService=o,this.alertService=i,this.rowData=[],this.modules=[],this.defineHeader(),this.setupOptions()}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}refresh(){this.skusService.getSkus().subscribe(e=>{e.status&&this.gridApi.setRowData(e.data)})}defineHeader(){this.columns=[{field:"name",headerName:"Name"},{field:"skuType",headerName:"SKU type",cellEditor:"selectEditor",cellEditorParams:{elements:["BULB_TYPE","BULB_TYPE_FOG_LIGHT","HIGH_BEAM","LOW_BEAM","FOG_LIGHT","HB_CAN_BUS","LB_CAN_BUS"]}}]}setupOptions(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:a.a}}}setValue(e){return Object(n.a)(this,void 0,void 0,function*(){const t={id:e.data.id,name:e.colDef.field,value:e.newValue};e.data[e.colDef.field]=e.newValue;const o=yield this.skusService.updateCell(t);return(o.status?this.onSuccess.bind(this):this.onError.bind(this))(o.message),o.status})}noRowSelected(){const e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}onRemove(){const e=this.gridApi.getSelectedNodes();if(!e||0===e.length)return;const t=e[0];this.confirmService.requestDeleteConfirmation().subscribe(e=>{e&&this.removeRow(t)})}removeRow(e){this.skusService.deleteRow(+e.data.id).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.refresh(),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})}onAdd(){this.openDialog({})}onDuplicate(){const e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}openDialog(e){this.dialog.open(v,{data:e,disableClose:!0}).afterClosed().subscribe(e=>{e&&this.skusService.addRow(e).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.refresh(),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})})}onSuccess(e){this.alertService.alertSuccess(e)}onError(e){this.alertService.alertError(e),this.refresh()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(S.a),s.Lb(r.b),s.Lb(w.a),s.Lb(k.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-skus-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(s.Rb(0,"mat-card",0),s.Rb(1,"button",1),s.Yb("click",function(){return t.onAdd()}),s.Rb(2,"mat-icon"),s.xc(3,"add"),s.Qb(),s.Qb(),s.Rb(4,"button",2),s.Yb("click",function(){return t.onDuplicate()}),s.Rb(5,"mat-icon"),s.xc(6,"content_copy"),s.Qb(),s.Qb(),s.Rb(7,"button",3),s.Yb("click",function(){return t.onRemove()}),s.Rb(8,"mat-icon"),s.xc(9,"delete"),s.Qb(),s.Qb(),s.Rb(10,"button",4),s.Yb("click",function(){return t.refresh()}),s.Rb(11,"mat-icon"),s.xc(12,"refresh"),s.Qb(),s.Qb(),s.Qb(),s.wc(13,M,2,3,"div",5)),2&e&&(s.Ab(4),s.hc("disabled",t.noRowSelected()),s.Ab(3),s.hc("disabled",t.noRowSelected()),s.Ab(6),s.hc("ngIf",t.columns))},directives:[A.a,p.a,R.a,_.a,m.k,y.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),e})();var E=o("PCNd"),O=o("vvyD");let x=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[m.c,E.a,y.b.withComponents(),O.a,l.h,l.q,i.e.forChild([{path:"",component:C,pathMatch:"full"}])]]}),e})()},PAny:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var i=o("AytR"),n=o("tk/3"),a=o("lJxs"),r=o("r4zg"),s=o("fXoL"),c=o("N+K7"),l=o("As+J");let d=(()=>{class e{constructor(e,t){this.httpService=e,this.skusService=t}getSKUs(){return this.skusService.getSkus().pipe(Object(a.a)(e=>{const t=e.data.reduce((e,t)=>{const o=e[t.skuType]||[];return o.push(t),e[t.skuType]=o,e},{});return Object.keys(t).reduce((e,o)=>(e[o]=this.addEmptyAndCompletedToSkus(t[o]),e),{})}))}getHeader(){return this.getSKUs().pipe(Object(a.a)(e=>{const t=e.HIGH_BEAM||this.addEmptyAndCompletedToSkus([]),o=e.LOW_BEAM||this.addEmptyAndCompletedToSkus([]),i=e.FOG_LIGHT||this.addEmptyAndCompletedToSkus([]);return this.buildHeader(t,o,i)}))}addEmptyAndCompletedToSkus(e){return e&&((e=e.map(e=>e.name)).unshift(r.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}buildHeader(e,t,o){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(e=>t.includes(e))}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:o}}]}getRows(e){const t=Object.keys(e.request.filterModel).map(t=>({name:t,value:e.request.filterModel[t].filter})),o=JSON.stringify(t),a=(new n.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",o).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(i.a.routes.vehicles,{params:a}).subscribe(t=>{if(t.status){e.successCallback(t.data,t.total);const o=[];e.columnApi.getAllColumns().forEach(e=>{o.push(e.colId)}),e.columnApi.autoSizeColumns(o,!1)}else e.failCallback()},t=>{e.failCallback()})}addRow(e){return this.httpService.postWithAuth(i.a.routes.vehicles,e)}updateCell(e){return this.httpService.putWithAuth(i.a.routes.vehicles,e).toPromise()}deleteRow(e){return this.httpService.deleteWithAuth(i.a.routes.vehicles+"/"+e)}getYear(){return this.httpService.get(i.a.routes.year)}getMake(e){return this.httpService.get(i.a.routes.make,{params:(new n.c).set("year",e)}).toPromise()}getModel(e,t){return this.httpService.get(i.a.routes.model,{params:(new n.c).set("year",e).set("make",t)}).toPromise()}}return e.\u0275fac=function(t){return new(t||e)(s.Vb(c.a),s.Vb(l.a))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mrSG:function(e,t,o){"use strict";function i(e,t,o,i){return new(o||(o=Promise))(function(n,a){function r(e){try{c(i.next(e))}catch(t){a(t)}}function s(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,s)}c((i=i.apply(e,t||[])).next())})}o.d(t,"a",function(){return i})}}]);