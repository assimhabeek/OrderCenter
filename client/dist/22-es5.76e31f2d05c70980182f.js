!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{tBFD:function(t,i,o){"use strict";o.r(i),o.d(i,"VehiclesModule",function(){return z});var a=o("tyNb"),r=o("mrSG"),c=o("sU9S"),l=o("vkgz"),s=o("cdsW"),d=o("0IaG"),u=o("fXoL"),b=o("PAny"),g=o("3Pt+"),m=o("kmnG"),f=o("qFsG"),h=o("ofXK"),p=o("d3UM"),v=o("bTqV"),w=o("FKr1");function P(e,t){1&e&&(u.Qb(0,"mat-error"),u.Qb(1,"strong"),u.wc(2,"Year is required"),u.Pb(),u.Pb())}function M(e,t){1&e&&(u.Qb(0,"mat-error"),u.Qb(1,"strong"),u.wc(2,"Make is required"),u.Pb(),u.Pb())}function A(e,t){1&e&&(u.Qb(0,"mat-error"),u.Qb(1,"strong"),u.wc(2,"Model is required"),u.Pb(),u.Pb())}function y(e,t){if(1&e&&(u.Qb(0,"mat-option",18),u.wc(1),u.Pb()),2&e){var n=t.$implicit;u.gc("value",n),u.Ab(1),u.xc(n)}}function k(e,t){if(1&e&&(u.Qb(0,"mat-option",18),u.wc(1),u.Pb()),2&e){var n=t.$implicit;u.gc("value",n),u.Ab(1),u.xc(n)}}function Q(e,t){if(1&e&&(u.Qb(0,"mat-option",18),u.wc(1),u.Pb()),2&e){var n=t.$implicit;u.gc("value",n),u.Ab(1),u.xc(n)}}function S(e,t){if(1&e&&(u.Qb(0,"mat-option",18),u.wc(1),u.Pb()),2&e){var n=t.$implicit;u.gc("value",n),u.Ab(1),u.xc(n)}}var C,O=((C=function(){function t(n,i,o){e(this,t),this.dialogRef=n,this.data=i,this.vehiclesService=o}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.vehiclesService.getSKUs().subscribe(function(t){e.highBeam=t.HIGH_BEAM,e.lowBeam=t.LOW_BEAM,e.fogLight=t.FOG_LIGHT,e.highLowBeam=e.highBeam.filter(function(t){return e.lowBeam.includes(t)})})}},{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"save",value:function(e){e.invalid||this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(e){return new(e||C)(u.Lb(d.g),u.Lb(d.a),u.Lb(b.a))},C.\u0275cmp=u.Fb({type:C,selectors:[["ct-vehicles-form"]],decls:48,vars:17,consts:[["mat-dialog-title",""],["novalidate",""],["orderForm","ngForm"],["floatLabel","always"],["matInput","","name","year","type","number",3,"ngModel","required","ngModelChange"],["year","ngModel"],[4,"ngIf"],["matInput","","name","make","type","text",3,"ngModel","required","ngModelChange"],["make","ngModel"],["matInput","","name","model","type","text",3,"ngModel","required","ngModelChange"],["model","ngModel"],["name","highLowBeam",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","highBeam",3,"ngModel","ngModelChange"],["name","lowBeam",3,"ngModel","ngModelChange"],["name","fogLight",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["cdkFocusInitial","","color","primary","mat-button","",3,"click"],[3,"value"]],template:function(e,t){if(1&e){var n=u.Rb();u.Qb(0,"h1",0),u.wc(1,"Add New"),u.Pb(),u.Qb(2,"form",1,2),u.Qb(4,"mat-dialog-content"),u.Qb(5,"mat-form-field",3),u.Qb(6,"mat-label"),u.wc(7,"Year"),u.Pb(),u.Qb(8,"input",4,5),u.Xb("ngModelChange",function(e){return t.data.year=e}),u.Pb(),u.vc(10,P,3,0,"mat-error",6),u.Pb(),u.Qb(11,"mat-form-field",3),u.Qb(12,"mat-label"),u.wc(13,"Make"),u.Pb(),u.Qb(14,"input",7,8),u.Xb("ngModelChange",function(e){return t.data.make=e}),u.Pb(),u.vc(16,M,3,0,"mat-error",6),u.Pb(),u.Qb(17,"mat-form-field",3),u.Qb(18,"mat-label"),u.wc(19,"Model"),u.Pb(),u.Qb(20,"input",9,10),u.Xb("ngModelChange",function(e){return t.data.model=e}),u.Pb(),u.vc(22,A,3,0,"mat-error",6),u.Pb(),u.Qb(23,"mat-form-field",3),u.Qb(24,"mat-label"),u.wc(25,"High And Low Beam"),u.Pb(),u.Qb(26,"mat-select",11),u.Xb("ngModelChange",function(e){return t.data.highLowBeam=e}),u.vc(27,y,2,2,"mat-option",12),u.Pb(),u.Pb(),u.Qb(28,"mat-form-field",3),u.Qb(29,"mat-label"),u.wc(30,"High Beam"),u.Pb(),u.Qb(31,"mat-select",13),u.Xb("ngModelChange",function(e){return t.data.highBeam=e}),u.vc(32,k,2,2,"mat-option",12),u.Pb(),u.Pb(),u.Qb(33,"mat-form-field",3),u.Qb(34,"mat-label"),u.wc(35,"Low Beam"),u.Pb(),u.Qb(36,"mat-select",14),u.Xb("ngModelChange",function(e){return t.data.lowBeam=e}),u.vc(37,Q,2,2,"mat-option",12),u.Pb(),u.Pb(),u.Qb(38,"mat-form-field",3),u.Qb(39,"mat-label"),u.wc(40,"Fog Light"),u.Pb(),u.Qb(41,"mat-select",15),u.Xb("ngModelChange",function(e){return t.data.fogLight=e}),u.vc(42,S,2,2,"mat-option",12),u.Pb(),u.Pb(),u.Pb(),u.Qb(43,"mat-dialog-actions"),u.Qb(44,"button",16),u.Xb("click",function(){return t.cancel()}),u.wc(45,"Cancel"),u.Pb(),u.Qb(46,"button",17),u.Xb("click",function(){u.nc(n);var e=u.lc(3);return t.save(e)}),u.wc(47,"Save"),u.Pb(),u.Pb(),u.Pb()}if(2&e){var i=u.lc(9),o=u.lc(15),a=u.lc(21);u.Ab(8),u.gc("ngModel",t.data.year)("required",!0),u.Ab(2),u.gc("ngIf",i.hasError("required")),u.Ab(4),u.gc("ngModel",t.data.make)("required",!0),u.Ab(2),u.gc("ngIf",o.hasError("required")),u.Ab(4),u.gc("ngModel",t.data.model)("required",!0),u.Ab(2),u.gc("ngIf",a.hasError("required")),u.Ab(4),u.gc("ngModel",t.data.highLowBeam),u.Ab(1),u.gc("ngForOf",t.highLowBeam),u.Ab(4),u.gc("ngModel",t.data.highBeam),u.Ab(1),u.gc("ngForOf",t.highBeam),u.Ab(4),u.gc("ngModel",t.data.lowBeam),u.Ab(1),u.gc("ngForOf",t.lowBeam),u.Ab(4),u.gc("ngModel",t.data.fogLight),u.Ab(1),u.gc("ngForOf",t.fogLight)}},directives:[d.h,g.t,g.m,g.n,d.e,m.c,m.f,f.b,g.p,g.c,g.l,g.o,g.r,h.k,p.a,h.j,d.c,v.a,m.b,w.k],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),C),x=o("GGDx"),L=o("tXqc"),B=o("Raaw"),R=o("A9p3"),F=o("3LUQ"),D=o("Wp6s"),_=o("Qu3c"),q=o("NFeN"),X=o("gwh1");function I(e,t){if(1&e&&(u.Qb(0,"div",6),u.Mb(1,"ag-grid-angular",7),u.Pb()),2&e){var n=u.bc();u.Ab(1),u.gc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var E,G,T=((E=function(){function t(n,i,o,a){var r=this;e(this,t),this.vehiclesService=n,this.dialog=i,this.confirmService=o,this.alertService=a,this.rowData=[],this.modules=[],this.modules=[s.a],this.loadHeaders().subscribe(function(){r.setupOptions()},function(e){console.log(e),r.onError("Could not load grid info")})}return n(t,[{key:"onGridReady",value:function(e){var t;this.gridApi=e.api,this.gridColumnApi=e.columnApi,null===(t=this.gridApi)||void 0===t||t.setServerSideDatasource(this.vehiclesService)}},{key:"addFilter",value:function(e){if(this.gridApi){var t=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(t,e))}}},{key:"loadHeaders",value:function(){var e=this;return this.vehiclesService.getHeader().pipe(Object(l.a)(function(t){return e.columns=t}))}},{key:"setupOptions",value:function(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowModelType:"serverSide",serverSideStoreType:"partial",rowSelection:"single",cacheBlockSize:100,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:c.a,makeSelectEditor:B.a,tooltipRenderer:x.a,checkboxRenderer:L.a}}}},{key:"refresh",value:function(){this.gridApi.refreshServerSideStore({})}},{key:"setValue",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.data.id,name:e.colDef.field,value:e.newValue},e.data[e.colDef.field]=e.newValue,t.next=4,this.vehiclesService.updateCell(n);case 4:return i=t.sent,t.abrupt("return",((i.status?this.onSuccess.bind(this):this.onError.bind(this))(i.message),i.status));case 6:case"end":return t.stop()}},t,this)}))}},{key:"noRowSelected",value:function(){var e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}},{key:"onRemove",value:function(){var e=this,t=this.gridApi.getSelectedNodes();if(t&&0!==t.length){var n=t[0];this.confirmService.requestDeleteConfirmation().subscribe(function(t){t&&e.removeRow(n)})}}},{key:"removeRow",value:function(e){var t=this;this.vehiclesService.deleteRow(+e.data.id).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.gridApi.refreshServerSideStore({}),t.onSuccess(e.message)):t.onError(e.message)})}},{key:"onAdd",value:function(){this.openDialog({})}},{key:"onDuplicate",value:function(){var e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}},{key:"openDialog",value:function(e){var t=this;this.dialog.open(O,{width:"100%",disableClose:!0,data:e}).afterClosed().subscribe(function(e){e&&t.vehiclesService.addRow(e).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.gridApi.refreshServerSideStore({}),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})})}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e)}}]),t}()).\u0275fac=function(e){return new(e||E)(u.Lb(b.a),u.Lb(d.b),u.Lb(R.a),u.Lb(F.a))},E.\u0275cmp=u.Fb({type:E,selectors:[["ct-vehicle-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["color","primary","mat-icon-button","","matTooltip","Add",3,"click"],["color","primary","mat-icon-button","","matTooltip","Duplicate",3,"disabled","click"],["color","warn","mat-icon-button","","matTooltip","Remove",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(u.Qb(0,"mat-card",0),u.Qb(1,"button",1),u.Xb("click",function(){return t.onAdd()}),u.Qb(2,"mat-icon"),u.wc(3,"add"),u.Pb(),u.Pb(),u.Qb(4,"button",2),u.Xb("click",function(){return t.onDuplicate()}),u.Qb(5,"mat-icon"),u.wc(6,"content_copy"),u.Pb(),u.Pb(),u.Qb(7,"button",3),u.Xb("click",function(){return t.onRemove()}),u.Qb(8,"mat-icon"),u.wc(9,"delete"),u.Pb(),u.Pb(),u.Qb(10,"button",4),u.Xb("click",function(){return t.refresh()}),u.Qb(11,"mat-icon"),u.wc(12,"refresh"),u.Pb(),u.Pb(),u.Pb(),u.vc(13,I,2,3,"div",5)),2&e&&(u.Ab(4),u.gc("disabled",t.noRowSelected()),u.Ab(3),u.gc("disabled",t.noRowSelected()),u.Ab(6),u.gc("ngIf",t.columns))},directives:[D.a,v.a,_.a,q.a,h.k,X.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),E),H=o("PCNd"),N=o("vvyD"),z=((G=function t(){e(this,t)}).\u0275mod=u.Jb({type:G}),G.\u0275inj=u.Ib({factory:function(e){return new(e||G)},imports:[[h.c,H.a,X.b.withComponents(),N.a,g.h,g.q,a.f.forChild([{path:"",component:T,pathMatch:"full"}])]]}),G)}}])}();