(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{tBFD:function(e,t,i){"use strict";i.r(t),i.d(t,"VehiclesModule",function(){return E});var o=i("tyNb"),n=i("mrSG"),a=i("sU9S"),r=i("vkgz"),c=i("mXS1"),l=i("0IaG"),s=i("fXoL"),d=i("PAny"),b=i("3Pt+"),h=i("kmnG"),g=i("qFsG"),m=i("ofXK"),u=i("d3UM"),p=i("bTqV"),f=i("FKr1");function R(e,t){1&e&&(s.Rb(0,"mat-error"),s.Rb(1,"strong"),s.xc(2,"Year is required"),s.Qb(),s.Qb())}function w(e,t){1&e&&(s.Rb(0,"mat-error"),s.Rb(1,"strong"),s.xc(2,"Make is required"),s.Qb(),s.Qb())}function v(e,t){1&e&&(s.Rb(0,"mat-error"),s.Rb(1,"strong"),s.xc(2,"Model is required"),s.Qb(),s.Qb())}function M(e,t){if(1&e&&(s.Rb(0,"mat-option",18),s.xc(1),s.Qb()),2&e){const e=t.$implicit;s.hc("value",e),s.Ab(1),s.yc(e)}}function A(e,t){if(1&e&&(s.Rb(0,"mat-option",18),s.xc(1),s.Qb()),2&e){const e=t.$implicit;s.hc("value",e),s.Ab(1),s.yc(e)}}function Q(e,t){if(1&e&&(s.Rb(0,"mat-option",18),s.xc(1),s.Qb()),2&e){const e=t.$implicit;s.hc("value",e),s.Ab(1),s.yc(e)}}function C(e,t){if(1&e&&(s.Rb(0,"mat-option",18),s.xc(1),s.Qb()),2&e){const e=t.$implicit;s.hc("value",e),s.Ab(1),s.yc(e)}}let S=(()=>{class e{constructor(e,t,i){this.dialogRef=e,this.data=t,this.vehiclesService=i}ngOnInit(){this.vehiclesService.getSKUs().subscribe(e=>{this.highBeam=e.HIGH_BEAM,this.lowBeam=e.LOW_BEAM,this.fogLight=e.FOG_LIGHT,this.highLowBeam=this.highBeam.filter(e=>this.lowBeam.includes(e))})}cancel(){this.dialogRef.close(!1)}save(e){e.invalid||this.dialogRef.close(this.data)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(l.g),s.Lb(l.a),s.Lb(d.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-vehicles-form"]],decls:48,vars:17,consts:[["mat-dialog-title",""],["novalidate",""],["orderForm","ngForm"],["floatLabel","always"],["matInput","","name","year","type","number",3,"required","ngModel","ngModelChange"],["year","ngModel"],[4,"ngIf"],["matInput","","name","make","type","text",3,"required","ngModel","ngModelChange"],["make","ngModel"],["matInput","","name","model","type","text",3,"required","ngModel","ngModelChange"],["model","ngModel"],["name","highLowBeam",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","highBeam",3,"ngModel","ngModelChange"],["name","lowBeam",3,"ngModel","ngModelChange"],["name","fogLight",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=s.Sb();s.Rb(0,"h1",0),s.xc(1,"Add New"),s.Qb(),s.Rb(2,"form",1,2),s.Rb(4,"mat-dialog-content"),s.Rb(5,"mat-form-field",3),s.Rb(6,"mat-label"),s.xc(7,"Year"),s.Qb(),s.Rb(8,"input",4,5),s.Yb("ngModelChange",function(e){return t.data.year=e}),s.Qb(),s.wc(10,R,3,0,"mat-error",6),s.Qb(),s.Rb(11,"mat-form-field",3),s.Rb(12,"mat-label"),s.xc(13,"Make"),s.Qb(),s.Rb(14,"input",7,8),s.Yb("ngModelChange",function(e){return t.data.make=e}),s.Qb(),s.wc(16,w,3,0,"mat-error",6),s.Qb(),s.Rb(17,"mat-form-field",3),s.Rb(18,"mat-label"),s.xc(19,"Model"),s.Qb(),s.Rb(20,"input",9,10),s.Yb("ngModelChange",function(e){return t.data.model=e}),s.Qb(),s.wc(22,v,3,0,"mat-error",6),s.Qb(),s.Rb(23,"mat-form-field",3),s.Rb(24,"mat-label"),s.xc(25,"High And Low Beam"),s.Qb(),s.Rb(26,"mat-select",11),s.Yb("ngModelChange",function(e){return t.data.highLowBeam=e}),s.wc(27,M,2,2,"mat-option",12),s.Qb(),s.Qb(),s.Rb(28,"mat-form-field",3),s.Rb(29,"mat-label"),s.xc(30,"High Beam"),s.Qb(),s.Rb(31,"mat-select",13),s.Yb("ngModelChange",function(e){return t.data.highBeam=e}),s.wc(32,A,2,2,"mat-option",12),s.Qb(),s.Qb(),s.Rb(33,"mat-form-field",3),s.Rb(34,"mat-label"),s.xc(35,"Low Beam"),s.Qb(),s.Rb(36,"mat-select",14),s.Yb("ngModelChange",function(e){return t.data.lowBeam=e}),s.wc(37,Q,2,2,"mat-option",12),s.Qb(),s.Qb(),s.Rb(38,"mat-form-field",3),s.Rb(39,"mat-label"),s.xc(40,"Fog Light"),s.Qb(),s.Rb(41,"mat-select",15),s.Yb("ngModelChange",function(e){return t.data.fogLight=e}),s.wc(42,C,2,2,"mat-option",12),s.Qb(),s.Qb(),s.Qb(),s.Rb(43,"mat-dialog-actions"),s.Rb(44,"button",16),s.Yb("click",function(){return t.cancel()}),s.xc(45,"Cancel"),s.Qb(),s.Rb(46,"button",17),s.Yb("click",function(){s.oc(e);const i=s.mc(3);return t.save(i)}),s.xc(47,"Save"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.mc(9),i=s.mc(15),o=s.mc(21);s.Ab(8),s.hc("required",!0)("ngModel",t.data.year),s.Ab(2),s.hc("ngIf",e.hasError("required")),s.Ab(4),s.hc("required",!0)("ngModel",t.data.make),s.Ab(2),s.hc("ngIf",i.hasError("required")),s.Ab(4),s.hc("required",!0)("ngModel",t.data.model),s.Ab(2),s.hc("ngIf",o.hasError("required")),s.Ab(4),s.hc("ngModel",t.data.highLowBeam),s.Ab(1),s.hc("ngForOf",t.highLowBeam),s.Ab(4),s.hc("ngModel",t.data.highBeam),s.Ab(1),s.hc("ngForOf",t.highBeam),s.Ab(4),s.hc("ngModel",t.data.lowBeam),s.Ab(1),s.hc("ngForOf",t.lowBeam),s.Ab(4),s.hc("ngModel",t.data.fogLight),s.Ab(1),s.hc("ngForOf",t.fogLight)}},directives:[l.h,b.t,b.m,b.n,l.e,h.c,h.f,g.b,b.p,b.c,b.r,b.l,b.o,m.k,u.a,m.j,l.c,p.a,h.b,f.k],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),e})();var x=i("GGDx"),y=i("tXqc"),O=i("Raaw"),k=i("A9p3"),L=i("3LUQ"),B=i("Wp6s"),F=i("Qu3c"),D=i("NFeN"),P=i("cWTo");function _(e,t){if(1&e&&(s.Rb(0,"div",6),s.Mb(1,"ag-grid-angular",7),s.Qb()),2&e){const e=s.cc();s.Ab(1),s.hc("gridOptions",e.options)("modules",e.modules)("rowData",e.rowData)}}let q=(()=>{class e{constructor(e,t,i,o){this.vehiclesService=e,this.dialog=t,this.confirmService=i,this.alertService=o,this.rowData=[],this.modules=[],this.modules=[c.a],this.loadHeaders().subscribe(e=>{this.setupOptions()},e=>{console.log(e),this.onError("Could not load grid info")})}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.setServerSideDatasource(this.vehiclesService)}addFilter(e){if(this.gridApi){const t=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(t,e))}}loadHeaders(){return this.vehiclesService.getHeader().pipe(Object(r.a)(e=>this.columns=e))}setupOptions(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowModelType:"serverSide",rowSelection:"single",cacheBlockSize:10,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:a.a,makeSelectEditor:O.a,tooltipRenderer:x.a,checkboxRenderer:y.a}}}refresh(){this.gridApi.purgeServerSideCache()}setValue(e){return Object(n.a)(this,void 0,void 0,function*(){const t={id:e.data.id,name:e.colDef.field,value:e.newValue};e.data[e.colDef.field]=e.newValue;const i=yield this.vehiclesService.updateCell(t);return(i.status?this.onSuccess.bind(this):this.onError.bind(this))(i.message),i.status})}noRowSelected(){const e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}onRemove(){const e=this.gridApi.getSelectedNodes();if(!e||0===e.length)return;const t=e[0];this.confirmService.requestDeleteConfirmation().subscribe(e=>{e&&this.removeRow(t)})}removeRow(e){this.vehiclesService.deleteRow(+e.data.id).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.gridApi.purgeServerSideCache(),this.onSuccess(e.message)):this.onError(e.message)})}onAdd(){this.openDialog({})}onDuplicate(){const e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}openDialog(e){this.dialog.open(S,{width:"100%",disableClose:!0,data:e}).afterClosed().subscribe(e=>{e&&this.vehiclesService.addRow(e).subscribe(e=>{e.status?(this.gridApi.deselectAll(),this.gridApi.purgeServerSideCache(),this.onSuccess(e.message)):(console.log(e),this.onError(e.message))})})}onSuccess(e){this.alertService.alertSuccess(e)}onError(e){this.alertService.alertError(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(d.a),s.Lb(l.b),s.Lb(k.a),s.Lb(L.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ct-vehicle-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(s.Rb(0,"mat-card",0),s.Rb(1,"button",1),s.Yb("click",function(){return t.onAdd()}),s.Rb(2,"mat-icon"),s.xc(3,"add"),s.Qb(),s.Qb(),s.Rb(4,"button",2),s.Yb("click",function(){return t.onDuplicate()}),s.Rb(5,"mat-icon"),s.xc(6,"content_copy"),s.Qb(),s.Qb(),s.Rb(7,"button",3),s.Yb("click",function(){return t.onRemove()}),s.Rb(8,"mat-icon"),s.xc(9,"delete"),s.Qb(),s.Qb(),s.Rb(10,"button",4),s.Yb("click",function(){return t.refresh()}),s.Rb(11,"mat-icon"),s.xc(12,"refresh"),s.Qb(),s.Qb(),s.Qb(),s.wc(13,_,2,3,"div",5)),2&e&&(s.Ab(4),s.hc("disabled",t.noRowSelected()),s.Ab(3),s.hc("disabled",t.noRowSelected()),s.Ab(6),s.hc("ngIf",t.columns))},directives:[B.a,p.a,F.a,D.a,m.k,P.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),e})();var I=i("PCNd"),Y=i("vvyD");let E=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[m.c,I.a,P.b.withComponents(),Y.a,b.h,b.q,o.e.forChild([{path:"",component:q,pathMatch:"full"}])]]}),e})()}}]);