!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{E6va:function(t,a,r){"use strict";r.r(a),r.d(a,"UsersModule",function(){return D});var o=r("tyNb"),i=r("mrSG"),c=r("sU9S"),s=r("0IaG"),l=r("fXoL"),u=r("MOE4"),d=r("3Pt+"),b=r("kmnG"),f=r("qFsG"),m=r("ofXK"),h=r("NFeN"),p=r("bSwM"),g=r("bTqV");function v(e,t){1&e&&(l.Rb(0,"mat-error"),l.Rb(1,"strong"),l.xc(2,"username is required"),l.Qb(),l.Qb())}function w(e,t){1&e&&(l.Rb(0,"mat-error"),l.Rb(1,"strong"),l.xc(2,"password is required"),l.Qb(),l.Qb())}var k,y=((k=function(){function t(n,a,r){e(this,t),this.dialogRef=n,this.data=a,this.ordersService=r,this.showPassword=!1}return n(t,[{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"save",value:function(e){e.invalid||this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(e){return new(e||k)(l.Lb(s.g),l.Lb(s.a),l.Lb(u.a))},k.\u0275cmp=l.Fb({type:k,selectors:[["ct-users-form"]],decls:34,vars:14,consts:[["novalidate",""],["orderForm","ngForm"],["mat-dialog-title",""],["floatLabel","always"],["matInput","","name","name","type","text",3,"ngModel","ngModelChange"],["matInput","","type","text","name","username",3,"required","ngModel","ngModelChange"],["username","ngModel"],[4,"ngIf"],["matInput","","autocomplete","","name","password",3,"required","ngModel","type","ngModelChange"],["password","ngModel"],["matSuffix","",1,"indicator",3,"color","click"],[1,"mat-form-field"],["name","active",3,"checked","ngModel","ngModelChange"],["name","admin",3,"checked","ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(e,t){if(1&e){var n=l.Sb();l.Rb(0,"form",0,1),l.Rb(2,"h1",2),l.xc(3,"Add New"),l.Qb(),l.Rb(4,"mat-dialog-content"),l.Rb(5,"mat-form-field",3),l.Rb(6,"mat-label"),l.xc(7,"Name"),l.Qb(),l.Rb(8,"input",4),l.Yb("ngModelChange",function(e){return t.data.name=e}),l.Qb(),l.Qb(),l.Rb(9,"mat-form-field"),l.Rb(10,"mat-label"),l.xc(11,"Username"),l.Qb(),l.Rb(12,"input",5,6),l.Yb("ngModelChange",function(e){return t.data.username=e}),l.Qb(),l.wc(14,v,3,0,"mat-error",7),l.Qb(),l.Rb(15,"mat-form-field"),l.Rb(16,"mat-label"),l.xc(17," Password "),l.Qb(),l.Rb(18,"input",8,9),l.Yb("ngModelChange",function(e){return t.data.password=e}),l.Qb(),l.Rb(20,"mat-icon",10),l.Yb("click",function(){return t.showPassword=!t.showPassword}),l.xc(21),l.Qb(),l.wc(22,w,3,0,"mat-error",7),l.Qb(),l.Rb(23,"div",11),l.Rb(24,"mat-checkbox",12),l.Yb("ngModelChange",function(e){return t.data.active=e}),l.xc(25," ACTIVE "),l.Qb(),l.Qb(),l.Rb(26,"div",11),l.Rb(27,"mat-checkbox",13),l.Yb("ngModelChange",function(e){return t.data.admin=e}),l.xc(28," ADMIN "),l.Qb(),l.Qb(),l.Qb(),l.Rb(29,"mat-dialog-actions"),l.Rb(30,"button",14),l.Yb("click",function(){return t.cancel()}),l.xc(31,"Cancel"),l.Qb(),l.Rb(32,"button",15),l.Yb("click",function(){l.oc(n);var e=l.mc(1);return t.save(e)}),l.xc(33,"Save"),l.Qb(),l.Qb(),l.Qb()}if(2&e){var a=l.mc(13),r=l.mc(19);l.Ab(8),l.hc("ngModel",t.data.name),l.Ab(4),l.hc("required",!0)("ngModel",t.data.username),l.Ab(2),l.hc("ngIf",a.hasError("required")),l.Ab(4),l.hc("required",!0)("ngModel",t.data.password)("type",t.showPassword?"text":"password"),l.Ab(2),l.hc("color",t.showPassword?"accent":"auto"),l.Ab(1),l.zc(" ",t.showPassword?"visibility":"visibility_off"," "),l.Ab(1),l.hc("ngIf",r.hasError("required")),l.Ab(2),l.hc("checked",!0)("ngModel",t.data.active),l.Ab(3),l.hc("checked",!0)("ngModel",t.data.admin)}},directives:[d.t,d.m,d.n,s.h,s.e,b.c,b.f,f.b,d.c,d.l,d.o,d.r,m.k,h.a,b.h,p.a,s.c,g.a,b.b],styles:[".mat-form-field[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),k),R=r("tXqc"),M=r("6Qg2"),S=r("A9p3"),A=r("3LUQ"),C=r("Wp6s"),x=r("Qu3c"),Q=r("cWTo");function P(e,t){if(1&e&&(l.Rb(0,"div",6),l.Mb(1,"ag-grid-angular",7),l.Qb()),2&e){var n=l.cc();l.Ab(1),l.hc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var E,O,N=((E=function(){function t(n,a,r,o){e(this,t),this.usersService=n,this.dialog=a,this.confirmService=r,this.alertService=o,this.rowData=[],this.modules=[],this.defineHeader(),this.setupOptions()}return n(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}},{key:"refresh",value:function(){var e=this;this.usersService.getUsers().subscribe(function(t){t.status&&e.gridApi.setRowData(t.data)})}},{key:"defineHeader",value:function(){this.columns=[{field:"name",headerName:"Name",editable:!0},{field:"username",headerName:"Username",editable:!0},{field:"active",headerName:"Active",cellRenderer:"checkboxRenderer"},{field:"admin",headerName:"Admin",cellRenderer:"checkboxRenderer"}]}},{key:"setupOptions",value:function(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:c.a,checkboxRenderer:R.a}}}},{key:"setValue",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.data.id,name:e.colDef.field,value:e.newValue},e.data[e.colDef.field]=e.newValue,t.next=4,this.usersService.updateCell(n);case 4:return a=t.sent,t.abrupt("return",((a.status?this.onSuccess.bind(this):this.onError.bind(this))(a.message),a.status));case 6:case"end":return t.stop()}},t,this)}))}},{key:"noRowSelected",value:function(){var e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}},{key:"onRemove",value:function(){var e=this,t=this.gridApi.getSelectedNodes();if(t&&0!==t.length){var n=t[0];this.confirmService.requestDeleteConfirmation().subscribe(function(t){t&&e.removeRow(n)})}}},{key:"removeRow",value:function(e){var t=this;this.usersService.deleteRow(+e.data.id).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.refresh(),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})}},{key:"onAdd",value:function(){this.openDialog({})}},{key:"onDuplicate",value:function(){var e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}},{key:"openDialog",value:function(e){var t=this;this.dialog.open(y,{data:e,disableClose:!0}).afterClosed().subscribe(function(e){e&&t.usersService.addRow(e).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.refresh(),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})})}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e),this.refresh()}}]),t}()).\u0275fac=function(e){return new(e||E)(l.Lb(M.a),l.Lb(s.b),l.Lb(S.a),l.Lb(A.a))},E.\u0275cmp=l.Fb({type:E,selectors:[["ct-users-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(l.Rb(0,"mat-card",0),l.Rb(1,"button",1),l.Yb("click",function(){return t.onAdd()}),l.Rb(2,"mat-icon"),l.xc(3,"add"),l.Qb(),l.Qb(),l.Rb(4,"button",2),l.Yb("click",function(){return t.onDuplicate()}),l.Rb(5,"mat-icon"),l.xc(6,"content_copy"),l.Qb(),l.Qb(),l.Rb(7,"button",3),l.Yb("click",function(){return t.onRemove()}),l.Rb(8,"mat-icon"),l.xc(9,"delete"),l.Qb(),l.Qb(),l.Rb(10,"button",4),l.Yb("click",function(){return t.refresh()}),l.Rb(11,"mat-icon"),l.xc(12,"refresh"),l.Qb(),l.Qb(),l.Qb(),l.wc(13,P,2,3,"div",5)),2&e&&(l.Ab(4),l.hc("disabled",t.noRowSelected()),l.Ab(3),l.hc("disabled",t.noRowSelected()),l.Ab(6),l.hc("ngIf",t.columns))},directives:[C.a,g.a,x.a,h.a,m.k,Q.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),E),_=r("PCNd"),q=r("vvyD"),D=((O=function t(){e(this,t)}).\u0275mod=l.Jb({type:O}),O.\u0275inj=l.Ib({factory:function(e){return new(e||O)},imports:[[m.c,_.a,Q.b.withComponents(),q.a,d.h,d.q,o.e.forChild([{path:"",component:N,pathMatch:"full"}])]]}),O)},PAny:function(t,a,r){"use strict";r.d(a,"a",function(){return b});var o=r("AytR"),i=r("tk/3"),c=r("lJxs"),s=r("r4zg"),l=r("fXoL"),u=r("N+K7"),d=r("As+J"),b=function(){var t=function(){function t(n,a){e(this,t),this.httpService=n,this.skusService=a}return n(t,[{key:"getSKUs",value:function(){var e=this;return this.skusService.getSkus().pipe(Object(c.a)(function(t){var n=t.data.reduce(function(e,t){var n=e[t.skuType]||[];return n.push(t),e[t.skuType]=n,e},{});return Object.keys(n).reduce(function(t,a){return t[a]=e.addEmptyAndCompletedToSkus(n[a]),t},{})}))}},{key:"getHeader",value:function(){var e=this;return this.getSKUs().pipe(Object(c.a)(function(t){var n=t.HIGH_BEAM||e.addEmptyAndCompletedToSkus([]),a=t.LOW_BEAM||e.addEmptyAndCompletedToSkus([]),r=t.FOG_LIGHT||e.addEmptyAndCompletedToSkus([]);return e.buildHeader(n,a,r)}))}},{key:"addEmptyAndCompletedToSkus",value:function(e){return e&&((e=e.map(function(e){return e.name})).unshift(s.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}},{key:"buildHeader",value:function(e,t,n){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(function(e){return t.includes(e)})}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:n}}]}},{key:"getRows",value:function(e){var t=Object.keys(e.request.filterModel).map(function(t){return{name:t,value:e.request.filterModel[t].filter}}),n=JSON.stringify(t),a=(new i.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",n).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(o.a.routes.vehicles,{params:a}).subscribe(function(t){if(t.status){e.successCallback(t.data,t.total);var n=[];e.columnApi.getAllColumns().forEach(function(e){n.push(e.colId)}),e.columnApi.autoSizeColumns(n,!1)}else e.failCallback()},function(t){e.failCallback()})}},{key:"addRow",value:function(e){return this.httpService.postWithAuth(o.a.routes.vehicles,e)}},{key:"updateCell",value:function(e){return this.httpService.putWithAuth(o.a.routes.vehicles,e).toPromise()}},{key:"deleteRow",value:function(e){return this.httpService.deleteWithAuth(o.a.routes.vehicles+"/"+e)}},{key:"getYear",value:function(){return this.httpService.get(o.a.routes.year)}},{key:"getMake",value:function(e){return this.httpService.get(o.a.routes.make,{params:(new i.c).set("year",e)}).toPromise()}},{key:"getModel",value:function(e,t){return this.httpService.get(o.a.routes.model,{params:(new i.c).set("year",e).set("make",t)}).toPromise()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Vb(u.a),l.Vb(d.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mrSG:function(e,t,n){"use strict";function a(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function c(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((a=a.apply(e,t||[])).next())})}n.d(t,"a",function(){return a})}}])}();