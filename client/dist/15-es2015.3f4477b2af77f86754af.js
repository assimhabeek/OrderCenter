(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{d34Q:function(t,e,r){"use strict";r.r(e),r.d(e,"ProductSkusModule",function(){return _});var i=r("tyNb"),o=r("mrSG"),n=r("sU9S"),a=r("vkgz"),s=r("fXoL"),c=r("AytR"),d=r("lJxs"),l=r("r4zg"),u=r("N+K7"),p=r("As+J");let h=(()=>{class t{constructor(t,e){this.httpService=t,this.skusService=e}getSKUs(){return this.skusService.getSkus().pipe(Object(d.a)(t=>{const e=t.data.reduce((t,e)=>{const r=t[e.skuType]||[];return r.push(e),t[e.skuType]=r,t},{});return Object.keys(e).reduce((t,r)=>(t[r]=this.addEmptyAndCompletedToSkus(e[r]),t),{})}))}getHeader(){return this.getSKUs().pipe(Object(d.a)(t=>{const e=t.BULB_TYPE||this.addEmptyAndCompletedToSkus([]),r=t.BULB_TYPE_FOG_LIGHT||this.addEmptyAndCompletedToSkus([]),i=t.HIGH_BEAM||this.addEmptyAndCompletedToSkus([]),o=t.LOW_BEAM||this.addEmptyAndCompletedToSkus([]),n=t.FOG_LIGHT||this.addEmptyAndCompletedToSkus([]),a=t.HB_CAN_BUS||this.addEmptyAndCompletedToSkus([]),s=t.LB_CAN_BUS||this.addEmptyAndCompletedToSkus([]);return this.buildHeader(e,r,i,o,n,a,s)}))}addEmptyAndCompletedToSkus(t){return t&&((t=t.map(t=>t.name)).unshift(l.a.NOT_EMPTY_CHAR),t.unshift("")),t||[]}buildHeader(t,e,r,i,o,n,a){return[{field:"id",headerName:"Product ID"},{field:"productName",headerName:"Product Name"},{field:"productTitle",headerName:"Product Title"},{field:"bulbType",headerName:"Bulb type",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"bulbTypeFogLight",headerName:"bulb Type Fog Light",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:r}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:i}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:o}},{field:"hbCanBus",headerName:"Hb can bus",cellEditor:"selectEditor",cellEditorParams:{elements:n}},{field:"lbCanBus",headerName:"Lb can bus",cellEditor:"selectEditor",cellEditorParams:{elements:a}}]}getProductSkus(){return this.httpService.getWithAuth(c.a.routes.productSkus)}updateCell(t){return this.httpService.putWithAuth(c.a.routes.productSkus,t).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(u.a),s.Vb(p.a))},t.\u0275prov=s.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=r("0IaG"),b=r("A9p3"),f=r("3LUQ"),g=r("Wp6s"),S=r("bTqV"),E=r("Qu3c"),w=r("NFeN"),C=r("ofXK"),v=r("cWTo");function k(t,e){if(1&t&&(s.Rb(0,"div",3),s.Mb(1,"ag-grid-angular",4),s.Qb()),2&t){const t=s.cc();s.Ab(1),s.hc("gridOptions",t.options)("modules",t.modules)("rowData",t.rowData)}}let y=(()=>{class t{constructor(t,e,r,i){this.productSkusService=t,this.dialog=e,this.confirmService=r,this.alertService=i,this.rowData=[],this.modules=[],this.loadHeaders().subscribe(t=>{this.setupOptions()},t=>{console.log(t),this.onError("Could not load grid info")})}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.refresh()}refresh(){this.productSkusService.getProductSkus().subscribe(t=>{t.status&&this.gridApi.setRowData(t.data)})}loadHeaders(){return this.productSkusService.getHeader().pipe(Object(a.a)(t=>this.columns=t))}setupOptions(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:n.a}}}setValue(t){return Object(o.a)(this,void 0,void 0,function*(){const e={id:t.data.id,name:t.colDef.field,value:t.newValue};t.data[t.colDef.field]=t.newValue;const r=yield this.productSkusService.updateCell(e);return(r.status?this.onSuccess.bind(this):this.onError.bind(this))(r.message),r.status})}noRowSelected(){const t=this.gridApi?this.gridApi.getSelectedNodes():null;return!t||0===t.length}onSuccess(t){this.alertService.alertSuccess(t)}onError(t){this.alertService.alertError(t),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(h),s.Lb(m.b),s.Lb(b.a),s.Lb(f.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["ct-skus-list"]],decls:5,vars:1,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(t,e){1&t&&(s.Rb(0,"mat-card",0),s.Rb(1,"button",1),s.Yb("click",function(){return e.refresh()}),s.Rb(2,"mat-icon"),s.xc(3,"refresh"),s.Qb(),s.Qb(),s.Qb(),s.wc(4,k,2,3,"div",2)),2&t&&(s.Ab(4),s.hc("ngIf",e.columns))},directives:[g.a,S.a,E.a,w.a,C.k,v.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),t})();var P=r("PCNd"),A=r("vvyD"),O=r("3Pt+");let _=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(e){return new(e||t)},imports:[[C.c,P.a,v.b.withComponents(),A.a,O.h,O.q,i.e.forChild([{path:"",component:y,pathMatch:"full"}])]]}),t})()},mrSG:function(t,e,r){"use strict";function i(t,e,r,i){return new(r||(r=Promise))(function(o,n){function a(t){try{c(i.next(t))}catch(e){n(e)}}function s(t){try{c(i.throw(t))}catch(e){n(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}c((i=i.apply(t,e||[])).next())})}r.d(e,"a",function(){return i})}}]);