(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{PAny:function(t,e,r){"use strict";r.d(e,"a",function(){return d});var i=r("AytR"),o=r("tk/3"),s=r("lJxs"),a=r("r4zg"),n=r("fXoL"),c=r("N+K7"),l=r("As+J");let d=(()=>{class t{constructor(t,e){this.httpService=t,this.skusService=e}getSKUs(){return this.skusService.getSkus().pipe(Object(s.a)(t=>{const e=t.data.reduce((t,e)=>{const r=t[e.skuType]||[];return r.push(e),t[e.skuType]=r,t},{});return Object.keys(e).reduce((t,r)=>(t[r]=this.addEmptyAndCompletedToSkus(e[r]),t),{})}))}getHeader(){return this.getSKUs().pipe(Object(s.a)(t=>{const e=t.HIGH_BEAM||this.addEmptyAndCompletedToSkus([]),r=t.LOW_BEAM||this.addEmptyAndCompletedToSkus([]),i=t.FOG_LIGHT||this.addEmptyAndCompletedToSkus([]);return this.buildHeader(e,r,i)}))}addEmptyAndCompletedToSkus(t){return t&&((t=t.map(t=>t.name)).unshift(a.a.NOT_EMPTY_CHAR),t.unshift("")),t||[]}buildHeader(t,e,r){return console.log(t),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:t.filter(t=>e.includes(t))}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:r}}]}getRows(t){const e=Object.keys(t.request.filterModel).map(e=>({name:e,value:t.request.filterModel[e].filter})),r=JSON.stringify(e),s=(new o.c).set("start",t.request.startRow.toString()).set("end",t.request.endRow.toString()).set("filter",r).set("sortBy",t.request.sortModel[0]?t.request.sortModel[0].colId:"").set("sortDirection",t.request.sortModel[0]?t.request.sortModel[0].sort:"");this.httpService.getWithAuth(i.a.routes.vehicles,{params:s}).subscribe(e=>{if(e.status){t.successCallback(e.data,e.total);const r=[];t.columnApi.getAllColumns().forEach(t=>{r.push(t.colId)}),t.columnApi.autoSizeColumns(r,!1)}else t.failCallback()},e=>{t.failCallback()})}addRow(t){return this.httpService.postWithAuth(i.a.routes.vehicles,t)}updateCell(t){return this.httpService.putWithAuth(i.a.routes.vehicles,t).toPromise()}deleteRow(t){return this.httpService.deleteWithAuth(i.a.routes.vehicles+"/"+t)}getYear(){return this.httpService.get(i.a.routes.year)}getMake(t){return this.httpService.get(i.a.routes.make,{params:(new o.c).set("year",t)}).toPromise()}getModel(t,e){return this.httpService.get(i.a.routes.model,{params:(new o.c).set("year",t).set("make",e)}).toPromise()}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(c.a),n.Vb(l.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"kN+n":function(t,e,r){"use strict";r.r(e),r.d(e,"ShopifyProductsModule",function(){return A});var i=r("tyNb"),o=r("fXoL"),s=r("AytR"),a=r("N+K7");let n=(()=>{class t{constructor(t){this.httpService=t}getShopifyProducts(){return this.httpService.getWithAuth(s.a.routes.shopifyProducts)}import(t){return this.httpService.postWithAuth(s.a.routes.shopifyProducts,t)}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(a.a))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=r("MOE4"),l=r("0IaG"),d=r("A9p3"),u=r("3LUQ"),h=r("Wp6s"),p=r("bTqV"),m=r("Qu3c"),b=r("NFeN"),f=r("ofXK"),g=r("cWTo");function v(t,e){if(1&t&&(o.Rb(0,"div",4),o.Mb(1,"ag-grid-angular",5),o.Qb()),2&t){const t=o.cc();o.Ab(1),o.hc("gridOptions",t.options)("modules",t.modules)("rowData",t.rowData)}}let S=(()=>{class t{constructor(t,e,r,i,o){this.syncProductsService=t,this.ordersService=e,this.dialog=r,this.confirmService=i,this.alertService=o,this.rowData=[],this.duplications=[],this.modules=[],this.disableImport=!1,this.defineHeader(),this.setupOptions()}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,this.refresh()}refresh(){this.syncProductsService.getShopifyProducts().subscribe(t=>{t.status&&(this.rowData=t.data,this.gridApi.setRowData(t.data),this.setAutoSize())})}defineHeader(){this.columns=[{field:"id",headerName:"Product Id"},{field:"productName",headerName:"Product name"},{field:"productTitle",headerName:"Product title"}]}setupOptions(){this.options={pagination:!1,defaultColDef:{filter:!1,sortable:!1,resizable:!0},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0}}insertOrders(){this.syncProductsService.import(this.rowData).subscribe(t=>{t.status?this.onSuccess(t.message):(console.log(t),this.disableImport=!1,this.onError(t.message))},t=>{this.disableImport=!1,console.log(t),this.onError(t.message)})}onSuccess(t){this.alertService.alertSuccess(t)}onError(t){this.alertService.alertError(t),this.refresh()}setAutoSize(){var t,e;const r=[];null===(t=this.gridColumnApi.getAllColumns())||void 0===t||t.forEach(t=>{r.push(t.colId)}),null===(e=this.gridColumnApi)||void 0===e||e.autoSizeColumns(r,!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(n),o.Lb(c.a),o.Lb(l.b),o.Lb(d.a),o.Lb(u.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["ct-users-list"]],decls:8,vars:2,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","color","primary","matTooltip","Import",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(t,e){1&t&&(o.Rb(0,"mat-card",0),o.Rb(1,"button",1),o.Yb("click",function(){return e.insertOrders()}),o.Rb(2,"mat-icon"),o.xc(3,"publish"),o.Qb(),o.Qb(),o.Rb(4,"button",2),o.Yb("click",function(){return e.refresh()}),o.Rb(5,"mat-icon"),o.xc(6,"refresh"),o.Qb(),o.Qb(),o.Qb(),o.wc(7,v,2,3,"div",3)),2&t&&(o.Ab(1),o.hc("disabled",0===e.rowData.length||e.disableImport),o.Ab(6),o.hc("ngIf",e.columns))},directives:[h.a,p.a,m.a,b.a,f.k,g.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),t})();var w=r("PCNd"),y=r("vvyD"),P=r("3Pt+");let A=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[f.c,w.a,g.b.withComponents(),y.a,P.h,P.q,i.e.forChild([{path:"",component:S,pathMatch:"full"}])]]}),t})()}}]);