!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"6/09":function(t,i,a){"use strict";a.r(i),a.d(i,"SkusModule",function(){return Q});var o=a("tyNb"),r=a("mrSG"),c=a("sU9S"),s=a("0IaG"),l=a("fXoL"),u=a("MOE4"),d=a("3Pt+"),f=a("kmnG"),m=a("qFsG"),b=a("ofXK"),h=a("d3UM"),p=a("FKr1"),g=a("bTqV");function v(e,t){1&e&&(l.Rb(0,"mat-error"),l.xc(1," Name is required "),l.Qb())}function k(e,t){1&e&&(l.Rb(0,"mat-error"),l.xc(1," Type is required "),l.Qb())}var y,w=((y=function(){function t(n,i,a){e(this,t),this.dialogRef=n,this.data=i,this.ordersService=a}return n(t,[{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"save",value:function(e){e.invalid||this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(e){return new(e||y)(l.Lb(s.g),l.Lb(s.a),l.Lb(u.a))},y.\u0275cmp=l.Fb({type:y,selectors:[["ct-skus-form"]],decls:36,vars:5,consts:[["novalidate",""],["skuForm","ngForm"],["mat-dialog-title",""],["floatLabel","always"],["matInput","","name","name","type","text",3,"required","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["name","skuType",3,"ngModel","ngModelChange"],["type","ngModel"],["value","BULB_TYPE"],["value","BULB_TYPE_FOG_LIGHT"],["value","HIGH_BEAM"],["value","LOW_BEAM"],["value","FOG_LIGHT"],["value","HB_CAN_BUS"],["value","LB_CAN_BUS"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(e,t){if(1&e){var n=l.Sb();l.Rb(0,"form",0,1),l.Rb(2,"h1",2),l.xc(3,"Add New"),l.Qb(),l.Rb(4,"mat-dialog-content"),l.Rb(5,"mat-form-field",3),l.Rb(6,"mat-label"),l.xc(7,"Name"),l.Qb(),l.Rb(8,"input",4,5),l.Yb("ngModelChange",function(e){return t.data.name=e}),l.Qb(),l.wc(10,v,2,0,"mat-error",6),l.Qb(),l.Rb(11,"mat-form-field",3),l.Rb(12,"mat-label"),l.xc(13,"Type"),l.Qb(),l.Rb(14,"mat-select",7,8),l.Yb("ngModelChange",function(e){return t.data.skuType=e}),l.Rb(16,"mat-option",9),l.xc(17,"BULB_TYPE"),l.Qb(),l.Rb(18,"mat-option",10),l.xc(19,"BULB_TYPE_FOG_LIGHT"),l.Qb(),l.Rb(20,"mat-option",11),l.xc(21,"HIGH_BEAM"),l.Qb(),l.Rb(22,"mat-option",12),l.xc(23,"LOW_BEAM"),l.Qb(),l.Rb(24,"mat-option",13),l.xc(25,"FOG_LIGHT"),l.Qb(),l.Rb(26,"mat-option",14),l.xc(27,"HB_CAN_BUS"),l.Qb(),l.Rb(28,"mat-option",15),l.xc(29,"LB_CAN_BUS"),l.Qb(),l.Qb(),l.wc(30,k,2,0,"mat-error",6),l.Qb(),l.Qb(),l.Rb(31,"mat-dialog-actions"),l.Rb(32,"button",16),l.Yb("click",function(){return t.cancel()}),l.xc(33,"Cancel"),l.Qb(),l.Rb(34,"button",17),l.Yb("click",function(){l.oc(n);var e=l.mc(1);return t.save(e)}),l.xc(35,"Save"),l.Qb(),l.Qb(),l.Qb()}if(2&e){var i=l.mc(9),a=l.mc(15);l.Ab(8),l.hc("required",!0)("ngModel",t.data.name),l.Ab(2),l.hc("ngIf",i.hasError("required")),l.Ab(4),l.hc("ngModel",t.data.skuType),l.Ab(16),l.hc("ngIf",a.hasError("required"))}},directives:[d.t,d.m,d.n,s.h,s.e,f.c,f.f,m.b,d.c,d.r,d.l,d.o,b.k,h.a,p.k,s.c,g.a,f.b],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),y),S=a("As+J"),R=a("A9p3"),A=a("3LUQ"),_=a("Wp6s"),C=a("Qu3c"),M=a("NFeN"),E=a("cWTo");function x(e,t){if(1&e&&(l.Rb(0,"div",6),l.Mb(1,"ag-grid-angular",7),l.Qb()),2&e){var n=l.cc();l.Ab(1),l.hc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var O,B,P=((O=function(){function t(n,i,a,o){e(this,t),this.skusService=n,this.dialog=i,this.confirmService=a,this.alertService=o,this.rowData=[],this.modules=[],this.defineHeader(),this.setupOptions()}return n(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}},{key:"refresh",value:function(){var e=this;this.skusService.getSkus().subscribe(function(t){t.status&&e.gridApi.setRowData(t.data)})}},{key:"defineHeader",value:function(){this.columns=[{field:"name",headerName:"Name"},{field:"skuType",headerName:"SKU type",cellEditor:"selectEditor",cellEditorParams:{elements:["BULB_TYPE","BULB_TYPE_FOG_LIGHT","HIGH_BEAM","LOW_BEAM","FOG_LIGHT","HB_CAN_BUS","LB_CAN_BUS"]}}]}},{key:"setupOptions",value:function(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:c.a}}}},{key:"setValue",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.data.id,name:e.colDef.field,value:e.newValue},e.data[e.colDef.field]=e.newValue,t.next=4,this.skusService.updateCell(n);case 4:return i=t.sent,t.abrupt("return",((i.status?this.onSuccess.bind(this):this.onError.bind(this))(i.message),i.status));case 6:case"end":return t.stop()}},t,this)}))}},{key:"noRowSelected",value:function(){var e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}},{key:"onRemove",value:function(){var e=this,t=this.gridApi.getSelectedNodes();if(t&&0!==t.length){var n=t[0];this.confirmService.requestDeleteConfirmation().subscribe(function(t){t&&e.removeRow(n)})}}},{key:"removeRow",value:function(e){var t=this;this.skusService.deleteRow(+e.data.id).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.refresh(),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})}},{key:"onAdd",value:function(){this.openDialog({})}},{key:"onDuplicate",value:function(){var e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}},{key:"openDialog",value:function(e){var t=this;this.dialog.open(w,{data:e,disableClose:!0}).afterClosed().subscribe(function(e){e&&t.skusService.addRow(e).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.refresh(),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})})}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e),this.refresh()}}]),t}()).\u0275fac=function(e){return new(e||O)(l.Lb(S.a),l.Lb(s.b),l.Lb(R.a),l.Lb(A.a))},O.\u0275cmp=l.Fb({type:O,selectors:[["ct-skus-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(l.Rb(0,"mat-card",0),l.Rb(1,"button",1),l.Yb("click",function(){return t.onAdd()}),l.Rb(2,"mat-icon"),l.xc(3,"add"),l.Qb(),l.Qb(),l.Rb(4,"button",2),l.Yb("click",function(){return t.onDuplicate()}),l.Rb(5,"mat-icon"),l.xc(6,"content_copy"),l.Qb(),l.Qb(),l.Rb(7,"button",3),l.Yb("click",function(){return t.onRemove()}),l.Rb(8,"mat-icon"),l.xc(9,"delete"),l.Qb(),l.Qb(),l.Rb(10,"button",4),l.Yb("click",function(){return t.refresh()}),l.Rb(11,"mat-icon"),l.xc(12,"refresh"),l.Qb(),l.Qb(),l.Qb(),l.wc(13,x,2,3,"div",5)),2&e&&(l.Ab(4),l.hc("disabled",t.noRowSelected()),l.Ab(3),l.hc("disabled",t.noRowSelected()),l.Ab(6),l.hc("ngIf",t.columns))},directives:[_.a,g.a,C.a,M.a,b.k,E.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),O),L=a("PCNd"),T=a("vvyD"),Q=((B=function t(){e(this,t)}).\u0275mod=l.Jb({type:B}),B.\u0275inj=l.Ib({factory:function(e){return new(e||B)},imports:[[b.c,L.a,E.b.withComponents(),T.a,d.h,d.q,o.e.forChild([{path:"",component:P,pathMatch:"full"}])]]}),B)},PAny:function(t,i,a){"use strict";a.d(i,"a",function(){return f});var o=a("AytR"),r=a("tk/3"),c=a("lJxs"),s=a("r4zg"),l=a("fXoL"),u=a("N+K7"),d=a("As+J"),f=function(){var t=function(){function t(n,i){e(this,t),this.httpService=n,this.skusService=i}return n(t,[{key:"getSKUs",value:function(){var e=this;return this.skusService.getSkus().pipe(Object(c.a)(function(t){var n=t.data.reduce(function(e,t){var n=e[t.skuType]||[];return n.push(t),e[t.skuType]=n,e},{});return Object.keys(n).reduce(function(t,i){return t[i]=e.addEmptyAndCompletedToSkus(n[i]),t},{})}))}},{key:"getHeader",value:function(){var e=this;return this.getSKUs().pipe(Object(c.a)(function(t){var n=t.HIGH_BEAM||e.addEmptyAndCompletedToSkus([]),i=t.LOW_BEAM||e.addEmptyAndCompletedToSkus([]),a=t.FOG_LIGHT||e.addEmptyAndCompletedToSkus([]);return e.buildHeader(n,i,a)}))}},{key:"addEmptyAndCompletedToSkus",value:function(e){return e&&((e=e.map(function(e){return e.name})).unshift(s.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}},{key:"buildHeader",value:function(e,t,n){return console.log(e),[{field:"year",headerName:"Vehicle Year"},{field:"make",headerName:"Vehicle Make"},{field:"model",headerName:"Vehicle Model"},{field:"highLowBeam",headerName:"High and LOW beam",cellEditor:"selectEditor",cellEditorParams:{elements:e.filter(function(e){return t.includes(e)})}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:n}}]}},{key:"getRows",value:function(e){var t=Object.keys(e.request.filterModel).map(function(t){return{name:t,value:e.request.filterModel[t].filter}}),n=JSON.stringify(t),i=(new r.c).set("start",e.request.startRow.toString()).set("end",e.request.endRow.toString()).set("filter",n).set("sortBy",e.request.sortModel[0]?e.request.sortModel[0].colId:"").set("sortDirection",e.request.sortModel[0]?e.request.sortModel[0].sort:"");this.httpService.getWithAuth(o.a.routes.vehicles,{params:i}).subscribe(function(t){if(t.status){e.successCallback(t.data,t.total);var n=[];e.columnApi.getAllColumns().forEach(function(e){n.push(e.colId)}),e.columnApi.autoSizeColumns(n,!1)}else e.failCallback()},function(t){e.failCallback()})}},{key:"addRow",value:function(e){return this.httpService.postWithAuth(o.a.routes.vehicles,e)}},{key:"updateCell",value:function(e){return this.httpService.putWithAuth(o.a.routes.vehicles,e).toPromise()}},{key:"deleteRow",value:function(e){return this.httpService.deleteWithAuth(o.a.routes.vehicles+"/"+e)}},{key:"getYear",value:function(){return this.httpService.get(o.a.routes.year)}},{key:"getMake",value:function(e){return this.httpService.get(o.a.routes.make,{params:(new r.c).set("year",e)}).toPromise()}},{key:"getModel",value:function(e,t){return this.httpService.get(o.a.routes.model,{params:(new r.c).set("year",e).set("make",t)}).toPromise()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Vb(u.a),l.Vb(d.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},mrSG:function(e,t,n){"use strict";function i(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{s(i.next(e))}catch(t){o(t)}}function c(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,c)}s((i=i.apply(e,t||[])).next())})}n.d(t,"a",function(){return i})}}])}();