!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{d34Q:function(t,r,i){"use strict";i.r(r),i.d(r,"ProductSkusModule",function(){return L});var o,a=i("tyNb"),u=i("mrSG"),c=i("sU9S"),s=i("vkgz"),l=i("fXoL"),d=i("AytR"),p=i("lJxs"),f=i("r4zg"),h=i("N+K7"),m=i("As+J"),b=((o=function(){function t(n,r){e(this,t),this.httpService=n,this.skusService=r}return n(t,[{key:"getSKUs",value:function(){var e=this;return this.skusService.getSkus().pipe(Object(p.a)(function(t){var n=t.data.reduce(function(e,t){var n=e[t.skuType]||[];return n.push(t),e[t.skuType]=n,e},{});return Object.keys(n).reduce(function(t,r){return t[r]=e.addEmptyAndCompletedToSkus(n[r]),t},{})}))}},{key:"getHeader",value:function(){var e=this;return this.getSKUs().pipe(Object(p.a)(function(t){var n=t.BULB_TYPE||e.addEmptyAndCompletedToSkus([]),r=t.BULB_TYPE_FOG_LIGHT||e.addEmptyAndCompletedToSkus([]),i=t.HIGH_BEAM||e.addEmptyAndCompletedToSkus([]),o=t.LOW_BEAM||e.addEmptyAndCompletedToSkus([]),a=t.FOG_LIGHT||e.addEmptyAndCompletedToSkus([]),u=t.HB_CAN_BUS||e.addEmptyAndCompletedToSkus([]),c=t.LB_CAN_BUS||e.addEmptyAndCompletedToSkus([]);return e.buildHeader(n,r,i,o,a,u,c)}))}},{key:"addEmptyAndCompletedToSkus",value:function(e){return e&&((e=e.map(function(e){return e.name})).unshift(f.a.NOT_EMPTY_CHAR),e.unshift("")),e||[]}},{key:"buildHeader",value:function(e,t,n,r,i,o,a){return[{field:"id",headerName:"Product ID"},{field:"productName",headerName:"Product Name"},{field:"productTitle",headerName:"Product Title"},{field:"bulbType",headerName:"Bulb type",cellEditor:"selectEditor",cellEditorParams:{elements:e}},{field:"bulbTypeFogLight",headerName:"bulb Type Fog Light",cellEditor:"selectEditor",cellEditorParams:{elements:t}},{field:"highBeam",headerName:"High beam",cellEditor:"selectEditor",cellEditorParams:{elements:n}},{field:"lowBeam",headerName:"Low beam",cellEditor:"selectEditor",cellEditorParams:{elements:r}},{field:"fogLight",headerName:"Fog light",cellEditor:"selectEditor",cellEditorParams:{elements:i}},{field:"hbCanBus",headerName:"Hb can bus",cellEditor:"selectEditor",cellEditorParams:{elements:o}},{field:"lbCanBus",headerName:"Lb can bus",cellEditor:"selectEditor",cellEditorParams:{elements:a}}]}},{key:"getProductSkus",value:function(){return this.httpService.getWithAuth(d.a.routes.productSkus)}},{key:"updateCell",value:function(e){return this.httpService.putWithAuth(d.a.routes.productSkus,e).toPromise()}}]),t}()).\u0275fac=function(e){return new(e||o)(l.Vb(h.a),l.Vb(m.a))},o.\u0275prov=l.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),g=i("0IaG"),v=i("A9p3"),y=i("3LUQ"),k=i("Wp6s"),S=i("bTqV"),w=i("Qu3c"),E=i("NFeN"),C=i("ofXK"),P=i("cWTo");function A(e,t){if(1&e&&(l.Rb(0,"div",3),l.Mb(1,"ag-grid-angular",4),l.Qb()),2&e){var n=l.cc();l.Ab(1),l.hc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var O,T,_=((O=function(){function t(n,r,i,o){var a=this;e(this,t),this.productSkusService=n,this.dialog=r,this.confirmService=i,this.alertService=o,this.rowData=[],this.modules=[],this.loadHeaders().subscribe(function(e){a.setupOptions()},function(e){console.log(e),a.onError("Could not load grid info")})}return n(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.refresh()}},{key:"refresh",value:function(){var e=this;this.productSkusService.getProductSkus().subscribe(function(t){t.status&&e.gridApi.setRowData(t.data)})}},{key:"loadHeaders",value:function(){var e=this;return this.productSkusService.getHeader().pipe(Object(s.a)(function(t){return e.columns=t}))}},{key:"setupOptions",value:function(){this.options={pagination:!1,defaultColDef:{filter:!0,sortable:!0,resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowSelection:"single",columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:c.a}}}},{key:"setValue",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.data.id,name:e.colDef.field,value:e.newValue},e.data[e.colDef.field]=e.newValue,t.next=4,this.productSkusService.updateCell(n);case 4:return r=t.sent,t.abrupt("return",((r.status?this.onSuccess.bind(this):this.onError.bind(this))(r.message),r.status));case 6:case"end":return t.stop()}},t,this)}))}},{key:"noRowSelected",value:function(){var e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e),this.refresh()}}]),t}()).\u0275fac=function(e){return new(e||O)(l.Lb(b),l.Lb(g.b),l.Lb(v.a),l.Lb(y.a))},O.\u0275cmp=l.Fb({type:O,selectors:[["ct-skus-list"]],decls:5,vars:1,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(l.Rb(0,"mat-card",0),l.Rb(1,"button",1),l.Yb("click",function(){return t.refresh()}),l.Rb(2,"mat-icon"),l.xc(3,"refresh"),l.Qb(),l.Qb(),l.Qb(),l.wc(4,A,2,3,"div",2)),2&e&&(l.Ab(4),l.hc("ngIf",t.columns))},directives:[k.a,S.a,w.a,E.a,C.k,P.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),O),N=i("PCNd"),M=i("vvyD"),x=i("3Pt+"),L=((T=function t(){e(this,t)}).\u0275mod=l.Jb({type:T}),T.\u0275inj=l.Ib({factory:function(e){return new(e||T)},imports:[[C.c,N.a,P.b.withComponents(),M.a,x.h,x.q,a.e.forChild([{path:"",component:_,pathMatch:"full"}])]]}),T)},mrSG:function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}c((r=r.apply(e,t||[])).next())})}n.d(t,"a",function(){return r})}}])}();