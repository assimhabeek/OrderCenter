!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{tBFD:function(t,i,a){"use strict";a.r(i),a.d(i,"VehiclesModule",function(){return z});var o=a("tyNb"),r=a("mrSG"),c=a("sU9S"),l=a("vkgz"),s=a("mXS1"),d=a("0IaG"),u=a("fXoL"),b=a("PAny"),g=a("3Pt+"),h=a("kmnG"),m=a("qFsG"),f=a("ofXK"),p=a("d3UM"),v=a("bTqV"),R=a("FKr1");function w(e,t){1&e&&(u.Rb(0,"mat-error"),u.Rb(1,"strong"),u.xc(2,"Year is required"),u.Qb(),u.Qb())}function M(e,t){1&e&&(u.Rb(0,"mat-error"),u.Rb(1,"strong"),u.xc(2,"Make is required"),u.Qb(),u.Qb())}function y(e,t){1&e&&(u.Rb(0,"mat-error"),u.Rb(1,"strong"),u.xc(2,"Model is required"),u.Qb(),u.Qb())}function A(e,t){if(1&e&&(u.Rb(0,"mat-option",18),u.xc(1),u.Qb()),2&e){var n=t.$implicit;u.hc("value",n),u.Ab(1),u.yc(n)}}function k(e,t){if(1&e&&(u.Rb(0,"mat-option",18),u.xc(1),u.Qb()),2&e){var n=t.$implicit;u.hc("value",n),u.Ab(1),u.yc(n)}}function Q(e,t){if(1&e&&(u.Rb(0,"mat-option",18),u.xc(1),u.Qb()),2&e){var n=t.$implicit;u.hc("value",n),u.Ab(1),u.yc(n)}}function C(e,t){if(1&e&&(u.Rb(0,"mat-option",18),u.xc(1),u.Qb()),2&e){var n=t.$implicit;u.hc("value",n),u.Ab(1),u.yc(n)}}var S,x=((S=function(){function t(n,i,a){e(this,t),this.dialogRef=n,this.data=i,this.vehiclesService=a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.vehiclesService.getSKUs().subscribe(function(t){e.highBeam=t.HIGH_BEAM,e.lowBeam=t.LOW_BEAM,e.fogLight=t.FOG_LIGHT,e.highLowBeam=e.highBeam.filter(function(t){return e.lowBeam.includes(t)})})}},{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"save",value:function(e){e.invalid||this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(e){return new(e||S)(u.Lb(d.g),u.Lb(d.a),u.Lb(b.a))},S.\u0275cmp=u.Fb({type:S,selectors:[["ct-vehicles-form"]],decls:48,vars:17,consts:[["mat-dialog-title",""],["novalidate",""],["orderForm","ngForm"],["floatLabel","always"],["matInput","","name","year","type","number",3,"required","ngModel","ngModelChange"],["year","ngModel"],[4,"ngIf"],["matInput","","name","make","type","text",3,"required","ngModel","ngModelChange"],["make","ngModel"],["matInput","","name","model","type","text",3,"required","ngModel","ngModelChange"],["model","ngModel"],["name","highLowBeam",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","highBeam",3,"ngModel","ngModelChange"],["name","lowBeam",3,"ngModel","ngModelChange"],["name","fogLight",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"],[3,"value"]],template:function(e,t){if(1&e){var n=u.Sb();u.Rb(0,"h1",0),u.xc(1,"Add New"),u.Qb(),u.Rb(2,"form",1,2),u.Rb(4,"mat-dialog-content"),u.Rb(5,"mat-form-field",3),u.Rb(6,"mat-label"),u.xc(7,"Year"),u.Qb(),u.Rb(8,"input",4,5),u.Yb("ngModelChange",function(e){return t.data.year=e}),u.Qb(),u.wc(10,w,3,0,"mat-error",6),u.Qb(),u.Rb(11,"mat-form-field",3),u.Rb(12,"mat-label"),u.xc(13,"Make"),u.Qb(),u.Rb(14,"input",7,8),u.Yb("ngModelChange",function(e){return t.data.make=e}),u.Qb(),u.wc(16,M,3,0,"mat-error",6),u.Qb(),u.Rb(17,"mat-form-field",3),u.Rb(18,"mat-label"),u.xc(19,"Model"),u.Qb(),u.Rb(20,"input",9,10),u.Yb("ngModelChange",function(e){return t.data.model=e}),u.Qb(),u.wc(22,y,3,0,"mat-error",6),u.Qb(),u.Rb(23,"mat-form-field",3),u.Rb(24,"mat-label"),u.xc(25,"High And Low Beam"),u.Qb(),u.Rb(26,"mat-select",11),u.Yb("ngModelChange",function(e){return t.data.highLowBeam=e}),u.wc(27,A,2,2,"mat-option",12),u.Qb(),u.Qb(),u.Rb(28,"mat-form-field",3),u.Rb(29,"mat-label"),u.xc(30,"High Beam"),u.Qb(),u.Rb(31,"mat-select",13),u.Yb("ngModelChange",function(e){return t.data.highBeam=e}),u.wc(32,k,2,2,"mat-option",12),u.Qb(),u.Qb(),u.Rb(33,"mat-form-field",3),u.Rb(34,"mat-label"),u.xc(35,"Low Beam"),u.Qb(),u.Rb(36,"mat-select",14),u.Yb("ngModelChange",function(e){return t.data.lowBeam=e}),u.wc(37,Q,2,2,"mat-option",12),u.Qb(),u.Qb(),u.Rb(38,"mat-form-field",3),u.Rb(39,"mat-label"),u.xc(40,"Fog Light"),u.Qb(),u.Rb(41,"mat-select",15),u.Yb("ngModelChange",function(e){return t.data.fogLight=e}),u.wc(42,C,2,2,"mat-option",12),u.Qb(),u.Qb(),u.Qb(),u.Rb(43,"mat-dialog-actions"),u.Rb(44,"button",16),u.Yb("click",function(){return t.cancel()}),u.xc(45,"Cancel"),u.Qb(),u.Rb(46,"button",17),u.Yb("click",function(){u.oc(n);var e=u.mc(3);return t.save(e)}),u.xc(47,"Save"),u.Qb(),u.Qb(),u.Qb()}if(2&e){var i=u.mc(9),a=u.mc(15),o=u.mc(21);u.Ab(8),u.hc("required",!0)("ngModel",t.data.year),u.Ab(2),u.hc("ngIf",i.hasError("required")),u.Ab(4),u.hc("required",!0)("ngModel",t.data.make),u.Ab(2),u.hc("ngIf",a.hasError("required")),u.Ab(4),u.hc("required",!0)("ngModel",t.data.model),u.Ab(2),u.hc("ngIf",o.hasError("required")),u.Ab(4),u.hc("ngModel",t.data.highLowBeam),u.Ab(1),u.hc("ngForOf",t.highLowBeam),u.Ab(4),u.hc("ngModel",t.data.highBeam),u.Ab(1),u.hc("ngForOf",t.highBeam),u.Ab(4),u.hc("ngModel",t.data.lowBeam),u.Ab(1),u.hc("ngForOf",t.lowBeam),u.Ab(4),u.hc("ngModel",t.data.fogLight),u.Ab(1),u.hc("ngForOf",t.fogLight)}},directives:[d.h,g.t,g.m,g.n,d.e,h.c,h.f,m.b,g.p,g.c,g.r,g.l,g.o,f.k,p.a,f.j,d.c,v.a,h.b,R.k],styles:["form[_ngcontent-%COMP%]{text-align:center}mat-form-field[_ngcontent-%COMP%]{text-align:left;margin:8px 16px;width:220px}"]}),S),O=a("GGDx"),L=a("tXqc"),B=a("Raaw"),F=a("A9p3"),P=a("3LUQ"),D=a("Wp6s"),_=a("Qu3c"),q=a("NFeN"),I=a("cWTo");function Y(e,t){if(1&e&&(u.Rb(0,"div",6),u.Mb(1,"ag-grid-angular",7),u.Qb()),2&e){var n=u.cc();u.Ab(1),u.hc("gridOptions",n.options)("modules",n.modules)("rowData",n.rowData)}}var E,G,T=((E=function(){function t(n,i,a,o){var r=this;e(this,t),this.vehiclesService=n,this.dialog=i,this.confirmService=a,this.alertService=o,this.rowData=[],this.modules=[],this.modules=[s.a],this.loadHeaders().subscribe(function(e){r.setupOptions()},function(e){console.log(e),r.onError("Could not load grid info")})}return n(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,this.gridApi.setServerSideDatasource(this.vehiclesService)}},{key:"addFilter",value:function(e){if(this.gridApi){var t=this.gridApi.getFilterModel()?this.gridApi.getFilterModel():{};this.gridApi.setFilterModel(Object.assign(t,e))}}},{key:"loadHeaders",value:function(){var e=this;return this.vehiclesService.getHeader().pipe(Object(l.a)(function(t){return e.columns=t}))}},{key:"setupOptions",value:function(){this.options={pagination:!1,tooltipShowDelay:0,defaultColDef:{sortable:!0,filter:!0,filterParams:{filterOptions:["contains"],defaultOption:"contains",suppressAndOrCondition:!0},resizable:!0,editable:!0,valueSetter:this.setValue.bind(this)},animateRows:!0,rowModelType:"serverSide",rowSelection:"single",cacheBlockSize:10,columnDefs:this.columns,onGridReady:this.onGridReady.bind(this),paginationAutoPageSize:!0,frameworkComponents:{selectEditor:c.a,makeSelectEditor:B.a,tooltipRenderer:O.a,checkboxRenderer:L.a}}}},{key:"refresh",value:function(){this.gridApi.purgeServerSideCache()}},{key:"setValue",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.data.id,name:e.colDef.field,value:e.newValue},e.data[e.colDef.field]=e.newValue,t.next=4,this.vehiclesService.updateCell(n);case 4:return i=t.sent,t.abrupt("return",((i.status?this.onSuccess.bind(this):this.onError.bind(this))(i.message),i.status));case 6:case"end":return t.stop()}},t,this)}))}},{key:"noRowSelected",value:function(){var e=this.gridApi?this.gridApi.getSelectedNodes():null;return!e||0===e.length}},{key:"onRemove",value:function(){var e=this,t=this.gridApi.getSelectedNodes();if(t&&0!==t.length){var n=t[0];this.confirmService.requestDeleteConfirmation().subscribe(function(t){t&&e.removeRow(n)})}}},{key:"removeRow",value:function(e){var t=this;this.vehiclesService.deleteRow(+e.data.id).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.gridApi.purgeServerSideCache(),t.onSuccess(e.message)):t.onError(e.message)})}},{key:"onAdd",value:function(){this.openDialog({})}},{key:"onDuplicate",value:function(){var e=this.gridApi.getSelectedNodes();e&&0!==e.length&&this.openDialog(e[0].data)}},{key:"openDialog",value:function(e){var t=this;this.dialog.open(x,{width:"100%",disableClose:!0,data:e}).afterClosed().subscribe(function(e){e&&t.vehiclesService.addRow(e).subscribe(function(e){e.status?(t.gridApi.deselectAll(),t.gridApi.purgeServerSideCache(),t.onSuccess(e.message)):(console.log(e),t.onError(e.message))})})}},{key:"onSuccess",value:function(e){this.alertService.alertSuccess(e)}},{key:"onError",value:function(e){this.alertService.alertError(e)}}]),t}()).\u0275fac=function(e){return new(e||E)(u.Lb(b.a),u.Lb(d.b),u.Lb(F.a),u.Lb(P.a))},E.\u0275cmp=u.Fb({type:E,selectors:[["ct-vehicle-list"]],decls:14,vars:3,consts:[[1,"ct-toolbar","mat-elevation-z1"],["mat-icon-button","","matTooltip","Add","color","primary",3,"click"],["mat-icon-button","","matTooltip","Duplicate","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"disabled","click"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","ct-table-wrapper",4,"ngIf"],[1,"ct-table-wrapper"],[1,"ag-theme-balham",3,"gridOptions","modules","rowData"]],template:function(e,t){1&e&&(u.Rb(0,"mat-card",0),u.Rb(1,"button",1),u.Yb("click",function(){return t.onAdd()}),u.Rb(2,"mat-icon"),u.xc(3,"add"),u.Qb(),u.Qb(),u.Rb(4,"button",2),u.Yb("click",function(){return t.onDuplicate()}),u.Rb(5,"mat-icon"),u.xc(6,"content_copy"),u.Qb(),u.Qb(),u.Rb(7,"button",3),u.Yb("click",function(){return t.onRemove()}),u.Rb(8,"mat-icon"),u.xc(9,"delete"),u.Qb(),u.Qb(),u.Rb(10,"button",4),u.Yb("click",function(){return t.refresh()}),u.Rb(11,"mat-icon"),u.xc(12,"refresh"),u.Qb(),u.Qb(),u.Qb(),u.wc(13,Y,2,3,"div",5)),2&e&&(u.Ab(4),u.hc("disabled",t.noRowSelected()),u.Ab(3),u.hc("disabled",t.noRowSelected()),u.Ab(6),u.hc("ngIf",t.columns))},directives:[D.a,v.a,_.a,q.a,f.k,I.a],styles:[".ct-toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding:0!important;margin:0!important}.ct-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:0!important}.ct-table-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.ct-table-wrapper[_ngcontent-%COMP%]   ag-grid-angular[_ngcontent-%COMP%]{display:inline-block;flex:1 1 auto;height:calc(100vh - 118px)}.ct-table-wrapper[_ngcontent-%COMP%]   .ct-next-button[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{height:36px!important}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important}.ct-order-date[_ngcontent-%COMP%]{height:36px;font-size:12px}"]}),E),H=a("PCNd"),N=a("vvyD"),z=((G=function t(){e(this,t)}).\u0275mod=u.Jb({type:G}),G.\u0275inj=u.Ib({factory:function(e){return new(e||G)},imports:[[f.c,H.a,I.b.withComponents(),N.a,g.h,g.q,o.e.forChild([{path:"",component:T,pathMatch:"full"}])]]}),G)}}])}();